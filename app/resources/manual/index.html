<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CARA - Chess Analysis and Review Application - User Manual</title>
    <link rel="stylesheet" href="manual.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <img src="screenshots/appicon.svg" alt="CARA Icon" class="header-icon" />
                <div class="header-text">
                    <div class="header-left">
                        <h1 class="header-app-name">CARA</h1>
                        <p class="header-full-name">Chess Analysis and Review Application</p>
                    </div>
                    <div class="header-right">
                        <p class="header-manual-label">User Manual</p>
                        <p class="header-version">Version 2.5.2</p>
                    </div>
                </div>
            </div>
        </header>

        <nav>
            <h3 style="color: rgb(240, 240, 240); margin-top: 0;">Table of Contents</h3>
            <ul>
                <li><a href="#introduction">1. Introduction</a>
                    <ul>
                        <li><a href="#what-is-cara">1.1 What is CARA?</a></li>
                        <li><a href="#key-features">1.2 Key Features</a></li>
                        <li><a href="#about-manual">1.3 About This Manual</a></li>
                    </ul>
                </li>
                <li><a href="#attributions">2. Attributions</a>
                    <ul>
                        <li><a href="#libraries-dependencies">2.1 Libraries and Dependencies</a></li>
                        <li><a href="#chess-pieces">2.2 Chess Pieces</a></li>
                        <li><a href="#opening-books-eco">2.3 Opening Books and ECO Database</a></li>
                        <li><a href="#cara-license">2.4 CARA License</a></li>
                    </ul>
                </li>
                <li><a href="#installation">3. Installation</a>
                    <ul>
                        <li><a href="#system-requirements">3.1 System Requirements</a></li>
                        <li><a href="#installing-python">3.2 Installing Python</a></li>
                        <li><a href="#installing-libraries">3.3 Installing Required Libraries</a></li>
                        <li><a href="#installation-troubleshooting">3.4 Installation Troubleshooting</a></li>
                        <li><a href="#running-application">3.5 Running the Application</a></li>
                    </ul>
                </li>
                <li><a href="#getting-started">4. Getting Started</a>
                    <ul>
                        <li><a href="#application-overview">4.1 Application Overview</a></li>
                        <li><a href="#three-panel-layout">4.2 The Three-Panel Layout</a></li>
                        <li><a href="#main-panel-components">4.3 Main Panel Components</a>
                            <ul>
                                <li><a href="#chessboard">4.3.1 Chessboard</a></li>
                                <li><a href="#game-information-display">4.3.2 Game Information Display</a></li>
                                <li><a href="#evaluation-bar">4.3.3 Evaluation Bar</a></li>
                                <li><a href="#material-widget">4.3.4 Material Widget</a></li>
                                <li><a href="#turn-indicator">4.3.5 Turn Indicator</a></li>
                                <li><a href="#positional-heatmap">4.3.6 Positional Heatmap</a></li>
                            </ul>
                        </li>
                        <li><a href="#database-panel">4.4 Database Panel</a>
                            <ul>
                                <li><a href="#database-tabs">4.4.1 Database Tabs</a></li>
                                <li><a href="#game-table">4.4.2 Game Table</a></li>
                                <li><a href="#interacting-table">4.4.3 Interacting with the Table</a></li>
                                <li><a href="#panel-management">4.4.4 Panel Management</a></li>
                                <li><a href="#common-database-actions">4.4.5 Common Database Actions</a></li>
                            </ul>
                        </li>
                        <li><a href="#detail-panel">4.5 Detail Panel</a>
                            <ul>
                                <li><a href="#moves-list">4.5.1 Moves List</a></li>
                                <li><a href="#metadata">4.5.2 Metadata</a></li>
                                <li><a href="#manual-analysis">4.5.3 Manual Analysis</a></li>
                                <li><a href="#game-summary">4.5.4 Game Summary</a></li>
                                <li><a href="#player-stats">4.5.5 Player Stats</a></li>
                                <li><a href="#annotations">4.5.6 Annotations</a></li>
                                <li><a href="#ai-summary">4.5.7 AI Summary</a></li>
                            </ul>
                        </li>
                        <li><a href="#keyboard-shortcuts">4.6 Keyboard Shortcuts</a></li>
                        <li><a href="#first-game-analysis">4.7 Your First Game Analysis</a></li>
                    </ul>
                </li>
                <li><a href="#tasks">5. Common Tasks</a>
                    <ul>
                        <li><a href="#configuring-engines">5.1 Configuring Engines</a></li>
                        <li><a href="#importing-games">5.2 Importing Games</a></li>
                        <li><a href="#managing-databases">5.3 Managing Databases</a></li>
                        <li><a href="#searching-games">5.4 Searching Games</a></li>
                        <li><a href="#analyzing-game">5.5 Analyzing a Game</a></li>
                        <li><a href="#manual-analysis-task">5.6 Manual Analysis</a></li>
                        <li><a href="#viewing-player-statistics">5.7 Viewing Player Statistics</a></li>
                        <li><a href="#adding-annotations">5.8 Adding Annotations</a></li>
                        <li><a href="#copying-moving-games">5.9 Copying and Moving Games</a></li>
                    </ul>
                </li>
                <li><a href="#reference">6. Complete Reference</a>
                    <ul>
                        <li><a href="#file-menu">6.1 File Menu</a></li>
                        <li><a href="#edit-menu">6.2 Edit Menu</a></li>
                        <li><a href="#board-menu">6.3 Board Menu</a></li>
                        <li><a href="#pgn-menu">6.4 PGN Menu</a></li>
                        <li><a href="#moves-list-menu">6.5 Moves List Menu</a></li>
                        <li><a href="#game-analysis-menu">6.6 Game Analysis Menu</a></li>
                        <li><a href="#manual-analysis-menu">6.7 Manual Analysis Menu</a></li>
                        <li><a href="#annotations-menu">6.8 Annotations Menu</a></li>
                        <li><a href="#engines-menu">6.9 Engines Menu</a></li>
                        <li><a href="#ai-summary-menu">6.10 AI Summary Menu</a></li>
                        <li><a href="#help-menu">6.11 Help Menu</a></li>
                        <li><a href="#complete-keyboard-shortcuts">6.12 Complete Keyboard Shortcuts</a></li>
                    </ul>
                </li>
                <li><a href="#advanced-topics">7. Advanced Topics</a>
                    <ul>
                        <li><a href="#customizing-config">7.1 Customizing config.json</a></li>
                        <li><a href="#understanding-user-settings">7.2 Understanding user_settings.json</a></li>
                        <li><a href="#understanding-engine-parameters">7.3 Understanding engine_parameters.json</a></li>
                        <li><a href="#pgn-metadata-tags">7.4 PGN Metadata Tags Used by CARA</a></li>
                        <li><a href="#troubleshooting">7.5 Troubleshooting</a></li>
                        <li><a href="#performance-optimization">7.6 Performance Optimization</a></li>
                        <li><a href="#moves-list-columns-reference">7.7 Moves List Columns Reference</a></li>
                        <li><a href="#customizing-formulas">7.8 Customizing ELO and Accuracy Formulas</a></li>
                    </ul>
                </li>
            </ul>
        </nav>

        <!-- 1. INTRODUCTION -->
        <section id="introduction">
            <h2>1. Introduction</h2>
            <div class="outline-item">
                <h4 id="what-is-cara">1.1 What is CARA?</h4>
                <p>CARA (Chess Analysis and Review Application) is a full-featured desktop application designed for analyzing and reviewing chess games. Unlike chess playing applications or puzzle solvers, CARA focuses exclusively on post-game analysis and review, helping you understand your games, identify mistakes, recognize patterns, and improve your chess understanding.</p>
                
                <p>The development of CARA was motivated by the author's underwhelming experience with existing (and sometimes quite expensive) chess analysis tools, which often fell short in terms of usability, practical workflow integration, and the ability to deliver meaningful, actionable insights. Many applications overwhelmed users with unnecessary complexity and provided superficial analysis that didn't translate into genuine improvement. CARA was created to bridge this gap, offering an intuitive interface that makes deep game analysis accessible in an efficient manner while providing the detailed insights needed to understand not just what moves were played, but why they were played and how to improve.</p>
                
                <p>CARA was built in large part by an AI model under the author's direction. The author took special care to ensure the AI adhered to the established architectural guidelines and coding conventions throughout the development process, while proposing the features, user stories, and UX design. This project served as an experiment to explore the feasibility of building a full-fledged, complex desktop application with Python using AI code completion, testing whether modern AI tools can produce polished, fully-featured software when guided by clear architectural principles and consistent oversight.</p>
                
                <img src="screenshots/app_overview.png" alt="CARA Application Overview - Main interface showing chess board, game database, and analysis panels" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <p>CARA is built with PyQt6 and follows PyQt's Model/View architecture with additional separation of business logic using Controllers and signal observation patterns, ensuring a responsive user interface and clean separation of concerns. Views observe models through Qt's signal/slot mechanism, automatically updating when model data changes, while Controllers orchestrate business logic and coordinate between services and models. Following a strict coding convention, all UI styling, including fonts, colors, sizes, and dimensions, is defined in a centralized configuration file with no hardcoded values in the view components. This allows for complete customization of the application's appearance without modifying code. The application supports multiple chess engines via the UCI (Universal Chess Interface) protocol, allowing you to use engines like Stockfish, Shredder, Lc0, Komodo, Berserk, or any other UCI-compatible engine.</p>
                
                <p>Whether you're analyzing your own games, studying master games, or reviewing games from online platforms like Lichess or Chess.com, CARA provides the tools you need to gain deep insights into chess positions, moves, and patterns.</p>
            </div>
            
            <div class="outline-item">
                <h4 id="key-features">1.2 Key Features</h4>
                <p>CARA offers an extensive set of features designed to support thorough chess game analysis and review. Here are the main capabilities:</p>
                
                <ul>
                    <li><strong>PGN Database Management:</strong> Complete management of chess game collections stored in PGN format. The system supports opening multiple PGN databases simultaneously, each displayed in its own tab for easy navigation. Powerful search functionality allows you to find games by player names, dates, openings, results, and other criteria. Built-in deduplication helps identify and remove duplicate games across databases. Bulk operations streamline common tasks: replace tags across multiple games, clean and format PGN content, and perform batch modifications. Import games from local PGN files or directly from online platforms like Lichess and Chess.com, with support for filtering by date range, game type, and other criteria.</li>
                    
                    <li><strong>Interactive Chessboard:</strong> Beautiful, feature-rich chessboard at the heart of the application, providing an intuitive visual interface for game review and analysis. The board integrates seamlessly with game analysis and manual analysis through extensive visual indicators. Played move arrows highlight the last move made in the game, while best alternative move arrows indicate superior moves found during analysis. During manual analysis, PV1, PV2, and PV3 arrows display the principal variations from MultiPV analysis, allowing you to explore multiple candidate moves simultaneously. All arrows can be individually shown or hidden to customize the display according to your analysis needs. The board features a positional heatmap overlay that visualizes positional factors like weak squares, passed pawns, outposts, piece activity, and king safety through color-coded gradients. Additional toggleable elements include coordinate labels, turn indicator, game information panel, evaluation bar, and material widget. All visual elements are fully customizable through the configuration system.</li>
                    
                    <li><strong>Game Analysis:</strong> Automatic analysis of chess games using UCI-compatible chess engines, with sophisticated move assessment through MultiPV (Multiple Principal Variations) analysis and before-and-after position evaluation. The system analyzes each move by comparing the position before and after the move, evaluating multiple candidate moves simultaneously, and calculating Centipawn Loss (CPL) to classify moves as Good, Inaccuracy, Mistake, Blunder, or Brilliancy. This thorough approach provides detailed evaluation metrics and move quality assessments. Supports both single game analysis and bulk analysis of entire databases.</li>
                    
                    <li><strong>Game Summary:</strong> Complete game overview combining statistical analysis, key moments, and visual insights. The summary provides per-player statistics (accuracy, average CPL, move counts by classification), phase-by-phase performance breakdowns (Opening, Middlegame, Endgame), identification of top best and worst moves for each player, evaluation graph data, and automatically detected game highlights. The summary synthesizes all analysis data into a cohesive overview that helps you quickly understand the flow of the game, identify critical moments, and assess each player's performance across different phases of play.</li>
                    
                    <li><strong>Game Highlights:</strong> Automatic detection of 44 tactical and positional patterns through an extensible rule-based system. The system includes rules for detecting pins, forks, skewers, batteries, discovered attacks, tactical sequences, positional improvements, evaluation swings, material imbalances, and many more patterns. Highlights are organized by game phase and help you quickly identify key moments. The rule-based architecture is designed for extensibility: new highlight detection rules can be easily added by implementing a simple rule interface, allowing the system to grow and adapt to detect additional patterns and tactical themes.</li>
                    
                    <li><strong>Moves List:</strong> Centralized table view that encapsulates all important per-move information in one place. The moves list displays move notation, evaluations, move classifications, best move alternatives, Centipawn Loss (CPL) values, engine depth, material counts, FEN positions, and more across 32 available columns. The system features a flexible column profile management system, allowing you to create, save, and switch between different view profiles. Each profile can customize which columns are visible, their display order, and column widths, enabling you to tailor the view to your specific analysis needs—whether focusing on opening transitions, move assessment, or material tracking.</li>
                    
                    <li><strong>Player Statistics:</strong> Extensive aggregated statistics across multiple games, providing deep insights into playing patterns and performance. You can analyze any player from any or all open databases. The system calculates overall performance metrics, breaks down performance by game phase (Opening, Middlegame, Endgame), and tracks opening usage and accuracy. The system detects error patterns such as phase-specific blunder tendencies, tactical misses, opening-specific errors, consistently high Centipawn Loss, missed opportunities, and conversion issues in winning positions. The view updates asynchronously in the background when databases change, ensuring you always have current data without blocking the interface.</li>
                    
                    <li><strong>Manual Analysis:</strong> Perform continuous engine analysis on any position with MultiPV support. You can navigate through game positions while maintaining continuous analysis of the current position. Hovering over principal variation moves displays a beautiful optional miniature board showing the resulting position. Positional plan exploration extracts piece trajectories from PV lines, visualizing how pieces move through the engine's recommended plan on the chessboard. You can explore positional plans for up to three PV lines (PV1, PV2, PV3) independently, with configurable options for the number of pieces to track and exploration depth.</li>
                    
                    <li><strong>Annotations:</strong> Powerful free-form annotation system for marking positions, ideas, and analysis insights. Unlike other chess applications, text can be freely positioned anywhere on the board, adjusted in size and rotated. In addition to text, you can add arrows, circles, and square highlighting with customizable colors. Annotations are position-specific, attached to individual moves in the game, and are compressed and serialized in a PGN metadata tag to keep the PGN move notation clean. This flexible annotation system enables you to create rich, personalized study materials and analysis notes.</li>
                    
                    <li><strong>UCI Engine Integration:</strong> Clean, multithreaded UCI (Universal Chess Interface) layer implementation ensuring optimal engine performance. The system supports multiple engine setups with per-task configuration, allowing you to assign different engines to different analysis tasks (evaluation, game analysis, manual analysis) with task-specific parameters such as thread count, depth limits, time limits, and engine-specific options. Each engine operation runs in dedicated threads, preventing UI blocking and enabling concurrent analysis operations. The implementation manages engine lifecycle efficiently, handling process spawning, UCI protocol communication, option configuration, and resource cleanup, ensuring engines can perform calculations optimally without interference from other operations.</li>
                    
                    <li><strong>AI Summary:</strong> Interactive chat interface allowing you to discuss any position in a game with a Large Language Model (LLM). The AI model has access to extensive game data, including detailed engine analysis, move classifications, evaluation metrics, and positional information, enabling it to provide accurate assessments of the game, played moves, and current position.</li>
                </ul>
                
                <p>These features work together to provide a complete analysis environment, from importing and organizing games to deep positional understanding and statistical insights.</p>
            </div>
            <div class="outline-item">
                <h4 id="about-manual">1.3 About This Manual</h4>
                <p>This manual provides comprehensive documentation for CARA, covering everything from installation and basic usage to advanced configuration and troubleshooting. The manual is organized into seven main sections:</p>
                <ul>
                    <li><strong>Introduction:</strong> Overview of CARA, its features, and what makes it unique</li>
                    <li><strong>Attributions:</strong> Credits for libraries, resources, and licensing information</li>
                    <li><strong>Installation:</strong> Step-by-step installation instructions for Windows and macOS</li>
                    <li><strong>Getting Started:</strong> Interface overview and your first game analysis</li>
                    <li><strong>Common Tasks:</strong> Detailed guides for everyday operations</li>
                    <li><strong>Complete Reference:</strong> Comprehensive menu and keyboard shortcut documentation</li>
                    <li><strong>Advanced Topics:</strong> Configuration files, troubleshooting, and performance optimization</li>
                </ul>
                <p><strong>Navigation:</strong> Use the Table of Contents at the top to quickly jump to any section. All section headings are clickable links that navigate directly to that content. Cross-references throughout the manual link to related sections for easy navigation.</p>
                <div class="tip-box">
                    <strong>Quick Start:</strong> If you're new to CARA, we recommend starting with <a href="#first-game-analysis">section 4.7 "Your First Game Analysis"</a>, which provides a step-by-step walkthrough of analyzing your first game. For installation help, see <a href="#installation">section 3</a>.
                </div>
            </div>
        </section>

        <!-- 2. ATTRIBUTIONS -->
        <section id="attributions">
            <h2>2. Attributions</h2>
            <div class="outline-item">
                <h4 id="libraries-dependencies">2.1 Libraries and Dependencies</h4>
                <p>CARA relies on the following open-source libraries:</p>
                <ul>
                    <li><strong><a href="https://www.riverbankcomputing.com/software/pyqt/" target="_blank">PyQt6</a></strong> (>= 6.6.0) — licensed under <a href="https://www.gnu.org/licenses/gpl-3.0.html" target="_blank">GNU GPL v3.0</a>.</li>
                    <li><strong><a href="https://github.com/niklasf/python-chess" target="_blank">python-chess</a></strong> (>= 1.999) — licensed under <a href="https://github.com/niklasf/python-chess/blob/master/LICENSE" target="_blank">GNU GPL v3.0</a>.</li>
                    <li><strong><a href="https://requests.readthedocs.io/" target="_blank">requests</a></strong> (>= 2.31.0) — licensed under the <a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License 2.0</a>.</li>
                    <li><strong><a href="https://github.com/newville/asteval" target="_blank">asteval</a></strong> (>= 0.9.31) — licensed under the <a href="https://opensource.org/licenses/MIT" target="_blank">MIT License</a>.</li>
                </ul>
                <p>The author would like to express sincere appreciation to the developers and maintainers of these open-source projects. Their dedication and excellent work have made this application possible, and their contributions to the open-source community are invaluable.</p>
            </div>
            <div class="outline-item">
                <h4 id="chess-pieces">2.2 Chess Pieces</h4>
                <p>The default chess pieces CARA ships with are the classic SVG set created by <strong><a href="https://commons.wikimedia.org/wiki/User:Cburnett" target="_blank">User:Cburnett</a></strong> and hosted on Wikimedia Commons. These pieces are distributed under the dual licenses <strong>Creative Commons Attribution-ShareAlike 3.0</strong> and <strong>GNU Free Documentation License</strong>, which permit reuse and modification as long as attribution is provided and derivative works remain under the same license terms. Full details and download links for every piece in the set are available in the <a href="https://commons.wikimedia.org/wiki/Category:SVG_chess_pieces" target="_blank">SVG chess pieces collection on Wikimedia Commons</a>. We extend our thanks to Cburnett and the Wikimedia Commons community for maintaining these high-quality, freely reusable chess assets.</p>
            </div>
            <div class="outline-item">
                <h4 id="opening-books-eco">2.3 Opening Books and ECO Database</h4>
                <p>CARA uses two types of opening resources for identifying book moves and classifying chess openings:</p>
                
                <p><strong>ECO Database:</strong> The application includes an ECO (Encyclopaedia of Chess Openings) database based on the <a href="https://github.com/hayatbiralem/eco.json" target="_blank">eco.json</a> project by hayatbiralem, licensed under the MIT License. This extensive database contains over 12,000 known opening variations and is a collation of multiple chess opening sources including lichess, SCID database, Wikipedia, ChessTempo, and other public chess databases. The original eco.json data was compiled by Ömür Yanıkoğlu, with credit to Shane Hudson for the original SCID opening data. The database files (eco_base.json and eco_interpolated.json) were merged from the original source files (ecoA.json, ecoB.json, ecoC.json, ecoD.json, ecoE.json) that were organized by ECO code starting letter, simplifying lookup operations while maintaining complete coverage of chess opening theory.</p>
                
                <p><strong>Polyglot Opening Books:</strong> CARA supports Polyglot-format opening books, a binary format originally developed by Fabien Letouzey. The application includes a collection of Polyglot opening books organized by opening type (all openings, closed, flank, Indian, open, semi-closed, and semi-open). These books were compiled from publicly available sources and converted to the Polyglot format. For more information about the Polyglot format and tools, see the <a href="https://github.com/sshivaji/polyglot" target="_blank">Polyglot repository</a> maintained by sshivaji (a fork of Fabien Letouzey's original work).</p>
                
                <p>Both resources work together to provide complete opening identification: the ECO database offers position-based classification with standardized codes and names, while the Polyglot books provide move-based detection of book moves during game analysis.</p>
                
                <p>The author would like to express sincere appreciation to the creators and maintainers of these opening resources.</p>
            </div>
            
            <div class="outline-item">
                <h4 id="cara-license">2.4 CARA License</h4>
                <p>CARA (Chess Analysis and Review Application) is released under the <strong>GNU General Public License version 3 (GPL-3.0)</strong>.</p>
                
                <h5>2.4.1 What This Means for You</h5>
                <p>The GPL-3.0 license grants you the following freedoms:</p>
                <ul>
                    <li><strong>Freedom to use:</strong> You can use CARA for any purpose, including commercial use (e.g., chess trainers can use it with their students)</li>
                    <li><strong>Freedom to study:</strong> You have access to the source code to understand how CARA works</li>
                    <li><strong>Freedom to modify:</strong> You can modify CARA to suit your needs</li>
                    <li><strong>Freedom to distribute:</strong> You can share CARA with others</li>
                </ul>
                
                <h5>2.4.2 License Requirements</h5>
                <p>When distributing CARA (whether modified or unmodified), you must:</p>
                <ul>
                    <li><strong>Provide attribution:</strong> Include the original copyright notice and license</li>
                    <li><strong>Include source code:</strong> Make the complete source code available to recipients</li>
                    <li><strong>Use the same license:</strong> Any modified versions or derivative works must also be licensed under GPL-3.0</li>
                    <li><strong>Preserve notices:</strong> Keep all copyright and license notices intact</li>
                </ul>
                
                <h5>2.4.3 Why GPL-3.0?</h5>
                <p>GPL-3.0 was chosen for CARA because:</p>
                <ul>
                    <li><strong>Dependency compatibility:</strong> CARA uses GPL-3.0 licensed dependencies (PyQt6, python-chess), requiring GPL-3.0 compatibility</li>
                    <li><strong>Prevents proprietary resale:</strong> The copyleft provision ensures that CARA and any derivative works remain free and open source, preventing proprietary resale or rental</li>
                    <li><strong>Allows commercial use:</strong> You can use CARA commercially (e.g., in training, coaching, or analysis services) as long as you comply with the license terms</li>
                    <li><strong>Protects user freedoms:</strong> Ensures that users always have access to source code and can modify the software</li>
                </ul>
                
                <h5>2.4.4 Important Notes</h5>
                <ul>
                    <li><strong>No warranty:</strong> CARA is provided "as is" without any warranty. See the full license text for details.</li>
                    <li><strong>Derivative works:</strong> If you create a modified version of CARA, it must also be licensed under GPL-3.0 and you must make the source code available. This prevents proprietary forks while still allowing open-source improvements.</li>
                    <li><strong>Commercial services:</strong> You can offer commercial services using CARA (e.g., chess coaching, analysis services) without restrictions, as long as you comply with the license terms when distributing the software itself.</li>
                </ul>
                
                <p>For the complete license text, see the <code>LICENSE</code> file in the CARA distribution or visit <a href="https://www.gnu.org/licenses/gpl-3.0.html" target="_blank">gnu.org/licenses/gpl-3.0.html</a>.</p>
            </div>
        </section>

        <!-- 3. INSTALLATION -->
        <section id="installation">
            <h2>3. Installation</h2>
            <div class="tip-box" style="margin-bottom: 20px;">
                <strong>App Bundles (Recommended):</strong> Pre-built application bundles are available for Windows and macOS, which include all dependencies and can be run directly without Python installation. See the <a href="https://github.com/pguntermann/CARA/releases" target="_blank">releases page</a> for download options.
                <p style="margin-top: 10px; margin-bottom: 0;"><strong>macOS users:</strong> Due to macOS security settings, you may need to allow the app to run. If you see a security warning when trying to open the app, follow these steps:</p>
                <ol style="margin-top: 10px; margin-bottom: 10px;">
                    <li>Right-click the app and select "Open"</li>
                    <li>When the warning dialog appears, click "OK"</li>
                    <li>Open System Settings → Privacy & Security</li>
                    <li>Scroll down to find the blocked app notification and click "Open Anyway"</li>
                </ol>
                After completing these steps, you can launch the app normally.
            </div>
            <p style="margin-bottom: 20px;"><strong>Manual Installation:</strong> The following sections describe how to manually install Python and CARA dependencies, if you don't want to use the pre-built application bundles.</p>
            <div class="outline-item">
                <h4 id="system-requirements">3.1 System Requirements</h4>
                <p>Before installing CARA, ensure your system meets the following requirements:</p>
                
                <h5>Operating System</h5>
                <p>The application has been tested on Windows 11 and macOS Tahoe 26.2. In general, CARA should also run on Linux, but it has not been tested on Linux and may require some minor adjustments.</p>
                
                <h5>Python</h5>
                <p>Python 3.8 or higher is required. CARA uses PyQt6, which requires Python 3.8+. See <a href="#installing-python">section 3.2</a> for installation instructions.</p>
                
                <h5>Screen Resolution</h5>
                <p>A minimum screen resolution of <strong>1280×1024</strong> pixels is recommended. Some dialogs require at least 800 pixels in width and 900 pixels in height to display properly. Lower resolutions may cause dialogs to be cut off or difficult to use.</p>
                
                <h5>Hardware</h5>
                <p>No specific hardware requirements beyond what is needed to run Python and the operating system. For optimal performance when analyzing games with chess engines, a modern multi-core processor is recommended.</p>
            </div>
            <div class="outline-item">
                <h4 id="installing-python">3.2 Installing Python</h4>
                <p>CARA requires Python 3.8 or higher. If you don't have Python installed, you can install it using the methods below:</p>
                
                <h5>Windows</h5>
                <p><strong>Method 1: Using Windows Package Manager (Recommended)</strong><br>
                Open PowerShell or Windows Terminal and run:</p>
                <code class="command">winget install Python.Python.3</code><br>
                <p>This automatically installs Python and adds it to your PATH.</p>
                
                <p><strong>Method 2: Manual Download</strong></p>
                <ol>
                    <li>Visit <a href="https://www.python.org/downloads/" target="_blank">python.org/downloads</a> and download the latest Python 3.x installer for Windows.</li>
                    <li>When installing, make sure to check the box labeled "Add Python to PATH" at the bottom of the installer window.</li>
                </ol>
                
                <h5>macOS</h5>
                <p><strong>Method 1: Using Homebrew (Recommended)</strong><br>
                If you have Homebrew installed, open Terminal and run:</p>
                <code class="command">brew install python3</code><br>
                
                <p><strong>Method 2: Manual Download</strong></p>
                <ol>
                    <li>Visit <a href="https://www.python.org/downloads/" target="_blank">python.org/downloads</a> and download the latest Python 3.x installer for macOS.</li>
                    <li>Run the installer and follow the installation wizard.</li>
                </ol>
                
                <h5>Verifying Installation</h5>
                <p>After installation, open a terminal (PowerShell/Command Prompt on Windows, Terminal on macOS) and run:</p>
                <code class="command">python --version</code><br>
                <p>This should display the Python version number (e.g., "Python 3.11.5").</p>
                <p><strong>Note:</strong> On macOS, you may need to use <code>python3</code> instead of <code>python</code> to access Python 3.</p>
                
                <p><strong>Windows PATH Troubleshooting:</strong> If you see a "python is not recognized" error on Windows, Python may not be in your system PATH. Re-run the installer and ensure "Add Python to PATH" is checked, or manually add Python to your system PATH:</p>
                <ol>
                    <li>Find your Python installation directory (typically <code>C:\Users\YourUsername\AppData\Local\Programs\Python\Python3XX</code> or <code>C:\Python3XX</code>).</li>
                    <li>Press <code>Win+X</code> and select "System", then click "Advanced system settings".</li>
                    <li>Click "Environment Variables".</li>
                    <li>Under "System variables" (or "User variables"), select "Path" and click "Edit".</li>
                    <li>Click "New" and add the Python installation directory path, then click "New" again and add the Scripts subdirectory (e.g., <code>C:\Python3XX\Scripts</code>).</li>
                    <li>Click "OK" on all dialogs, then close and reopen your terminal for changes to take effect.</li>
                </ol>
            </div>
            <div class="outline-item">
                <h4 id="installing-libraries">3.3 Installing Required Libraries</h4>
                <p>CARA requires several Python libraries to function (see <a href="#libraries-dependencies">section 2.1</a> for a complete list). These can be installed all at once using the provided requirements file.</p>
                
                <div class="tip-box">
                    <strong>Quick Tip:</strong> pip (Python package installer) is included with Python 3.4 and later. If you installed Python using the methods described in <a href="#installing-python">section 3.2</a>, pip should already be available. Verify pip is installed by running <code class="command">pip --version</code> in your terminal.
                </div>
                
                <ol>
                    <li><strong>Navigate to the CARA directory:</strong><br>
                    Open a terminal (PowerShell or Command Prompt on Windows, Terminal on macOS) and navigate to the directory where you extracted or cloned CARA:<br>
                    <code class="command">cd path/to/cara</code><br>
                    Replace <code>path/to/cara</code> with the actual path to your CARA installation directory.</li>
                    
                    <li><strong>Install the required libraries:</strong><br>
                    Run the following command to install all dependencies:<br>
                    <code class="command">pip install -r requirements.txt</code><br>
                    </li>
                    
                    <li><strong>Verify installation:</strong><br>
                    After installation completes, verify that the libraries were installed correctly:<br>
                    <code class="command">pip list</code><br>
                    You should see <strong>PyQt6</strong>, <strong>python-chess</strong>, <strong>requests</strong>, and <strong>asteval</strong> in the list of installed packages.</li>
                </ol>
            </div>
            <div class="outline-item">
                <h4 id="installation-troubleshooting">3.4 Installation Troubleshooting</h4>
                
                <h5>Installing pip</h5>
                <p>If pip is not available after installing Python, you can install it manually:</p>
                <ol>
                    <li><strong>Download get-pip.py:</strong><br>
                    Download the <code>get-pip.py</code> script from <a href="https://bootstrap.pypa.io/get-pip.py" target="_blank">bootstrap.pypa.io/get-pip.py</a> and save it to a folder on your computer.</li>
                    
                    <li><strong>Run the installer:</strong><br>
                    Open a terminal, navigate to the folder containing <code>get-pip.py</code>, and run:<br>
                    <code class="command">python get-pip.py</code><br>
                    <strong>Note:</strong> On macOS, you may need to use <code>python3</code> instead of <code>python</code>.</li>
                    
                    <li><strong>Verify installation:</strong><br>
                    After installation completes, verify pip is installed:<br>
                    <code class="command">pip --version</code><br>
                    </li>
                </ol>
                
                <h5>Installing Dependencies Manually</h5>
                <p>If you prefer to install dependencies individually instead of using the requirements file, you can install each library separately:</p>
                <ol>
                    <li><strong>Install PyQt6:</strong><br>
                    <code class="command">pip install PyQt6>=6.6.0</code><br>
                    </li>
                    
                    <li><strong>Install python-chess:</strong><br>
                    <code class="command">pip install python-chess>=1.999</code><br>
                    </li>
                    
                    <li><strong>Install requests:</strong><br>
                    <code class="command">pip install requests>=2.31.0</code><br>
                    </li>
                    
                    <li><strong>Install asteval:</strong><br>
                    <code class="command">pip install asteval>=0.9.31</code><br>
                    </li>
                </ol>
                <p>After installing all dependencies, verify they are installed correctly using <code class="command">pip list</code>.</p>
            </div>
            <div class="outline-item">
                <h4 id="running-application">3.5 Running the Application</h4>
                <p>To start CARA, open a terminal (PowerShell or Command Prompt on Windows, Terminal on macOS), navigate to the CARA directory, and run:</p>
                <code class="command">python cara.py</code><br>
                <p><strong>Note:</strong> On macOS, you may need to use <code>python3</code> instead of <code>python</code>.</p>
                
                <h5>Configuration Files</h5>
                <p>CARA uses three configuration files to manage settings and preferences:</p>
                
                <ul>
                    <li><strong>config.json:</strong> Contains all UI styling, layout dimensions, colors, fonts, and application-wide default settings. This file is located in the <code>app/config/</code> directory and defines the visual appearance and behavior of the application. You can customize CARA's appearance by modifying this file without changing any source code.</li>
                    
                    <li><strong>user_settings.json:</strong> Stores your personal preferences and settings, including moves list column profiles, board visibility settings, PGN display options, engine configurations, and other user-specific settings. The file is automatically created when you first save settings and persists your preferences between application sessions.</li>
                    
                    <li><strong>engine_parameters.json:</strong> Stores engine-specific parameters and options for each configured chess engine. Engine settings are automatically saved to this file when you configure engines through the application interface.</li>
                </ul>
                
                <h5>Where Configuration Files Are Stored</h5>
                <p>The file location for <code>user_settings.json</code> and <code>engine_parameters.json</code> is determined by CARA's configuration settings. By default, these files are stored in the CARA root directory.</p>
                
                <p>However, when running CARA as an app bundle, the files are stored in different locations:</p>
                
                <ul>
                    <li><strong>Windows:</strong> Files are stored in your user data directory: <code>%APPDATA%\CARA\</code> (usually <code>C:\Users\YourUsername\AppData\Roaming\CARA\</code>).</li>
                    
                    <li><strong>macOS:</strong> Files are stored in <code>~/Library/Application Support/CARA/</code>.</li>
                </ul>
                
                <div class="tip-box">
                    <strong>Finding Your Configuration Files:</strong> If you're using an app bundle and need to locate your configuration files:
                    <ul style="margin-top: 10px;">
                        <li><strong>Windows:</strong> Press <code>Win+R</code>, type <code>%APPDATA%\CARA</code>, and press Enter to open the folder in File Explorer.</li>
                        <li><strong>macOS:</strong> Open Finder, press <code>⌘+Shift+G</code> (Go to Folder), type <code>~/Library/Application Support/CARA</code>, and press Enter.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- 4. GETTING STARTED -->
        <section id="getting-started">
            <h2>4. Getting Started</h2>
            <div class="outline-item">
                <h4 id="application-overview">4.1 Application Overview</h4>
                <p>CARA provides an integrated environment for analyzing and reviewing chess games. The application window is organized into three main panels that work together to give you complete insight into your games: the Main Panel displays the chessboard and game information, the Detail Panel provides detailed analysis views and tools, and the Database Panel manages your game collections.</p>
                
                <p>The interface is designed to be intuitive and efficient. You can resize panels by dragging the splitter handles between them, customize which information is displayed, and use keyboard shortcuts for quick navigation. The application automatically updates all views when you navigate through a game, ensuring that the chessboard, move lists, evaluations, and statistics stay synchronized.</p>
                
                <div class="tip-box">
                    <strong>Quick Tip:</strong> Use the <code>←</code> (Left Arrow) and <code>→</code> (Right Arrow) keys to navigate through game moves. This is the primary and most efficient way to review games move-by-move. The board, moves list, and all analysis views update automatically as you navigate.
                </div>
                
                <p>All aspects of CARA's appearance can be customized through the <code>config.json</code> configuration file. This includes fonts, colors, sizes, dimensions, panel layouts, and all UI styling. The configuration system follows a strict structure with no hardcoded values in the application code, allowing you to completely customize the application's appearance without modifying any source code.</p>
                
                <p>All functions and features in CARA can be accessed through the menu bar at the top of the application window. Most menu items have keyboard shortcuts displayed next to them for quick access.</p>
            </div>
            <div class="outline-item">
                <h4 id="three-panel-layout">4.2 The Three-Panel Layout</h4>
                <p>CARA's main window is organized into three resizable panels:</p>
                
                <img src="screenshots/three_panel_layout.svg" alt="CARA Three-Panel Layout - Main Panel (left), Detail Panel (right), Database Panel (bottom), and Status Bar" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <ul>
                    <li><strong>Main Panel</strong> (left): Displays the chessboard along with game information, evaluation bar, material widget, turn indicator, and other board-related widgets. This is the primary visual interface for reviewing games and positions.</li>
                    <li><strong>Detail Panel</strong> (right): Contains the PGN notation pane at the top, displaying the game's move notation, and tabbed views below for detailed analysis, including the Moves List, Metadata, Manual Analysis, Game Summary, Player Stats, Annotations, and AI Summary. This panel provides in-depth information and analysis tools.</li>
                    <li><strong>Database Panel</strong> (bottom): Manages your game collections with tabs for multiple PGN databases, searchable game tables, and column customization. This panel can be collapsed to maximize space for the main and detail panels.</li>
                </ul>
                
                <p>You can resize any panel by dragging the splitter handles between them. The database panel can be collapsed by double-clicking its splitter handle or using <span class="menu-item">View → Hide Database Panel</span> (<code>Ctrl+Shift+D</code> / <code>⌘+Shift+D</code>). The status bar at the bottom of the window displays status messages and progress indicators during long-running operations.</p>
            </div>
            <div class="outline-item">
                <h4 id="main-panel-components">4.3 Main Panel Components</h4>
                <p>The Main Panel displays the chessboard along with game information and analysis widgets. The board updates automatically as you navigate through moves using the arrow keys.</p>
                
                <h5 id="chessboard">4.3.1 Chessboard</h5>
                <p>The chessboard displays the current position.</p>
                
                <img src="screenshots/chessboard.png" alt="CARA Chessboard - Main chessboard interface showing chess pieces, coordinate labels, visual move indicators, evaluation bar on the left side, and material widget in the upper right corner" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <p>Rotate the board 180 degrees using the <code>X</code> key or <span class="menu-item">Board → Rotate Board</span>. Rotation is visual only and does not change the position—FEN notation always represents positions from White's perspective.</p>
                
                <p>The following visual indicators can be toggled on or off:</p>
                <ul>
                    <li><strong>Coordinates:</strong> File and rank labels around the board edges. Toggle with <code>Alt+C</code> / <code>⌥+C</code> or <span class="menu-item">Board → Show Coordinates</span>.</li>
                    <li><strong>Turn Indicator:</strong> Shows whose turn it is to move. Toggle with <code>Alt+T</code> / <code>⌥+T</code> or <span class="menu-item">Board → Show Turn Indicator</span>.</li>
                    <li><strong>Played Move Arrow:</strong> Highlights the last move made in the game. Toggle with <code>Alt+P</code> / <code>⌥+P</code> or <span class="menu-item">Board → Show Played Move</span>.</li>
                    <li><strong>Best Next Move Arrow (PV1):</strong> Shows the engine's recommended move during manual analysis mode. Toggle with <code>Alt+B</code> / <code>⌥+B</code> or <span class="menu-item">Board → Show Best Next Move</span>.</li>
                    <li><strong>PV2 and PV3 Arrows:</strong> Display alternative candidate moves from MultiPV analysis during manual analysis mode. Toggle with <code>Alt+2</code> / <code>⌥+2</code>, <code>Alt+3</code> / <code>⌥+3</code> or <span class="menu-item">Board → Show Next Best Move (PV2/PV3)</span>.</li>
                    <li><strong>Best Alternative Move Arrow:</strong> Highlights superior moves found after analyzing the game with the Game Analysis function. The arrow appears once analysis has been performed and indicates when the played move was not optimal. Toggle with <code>Alt+A</code> / <code>⌥+A</code> or <span class="menu-item">Board → Show Best Alternative Move</span>.</li>
                    <li><strong>Positional Heatmap:</strong> Color-coded overlay showing positional factors (weak squares, passed pawns, outposts, piece activity, king safety). Toggle with <code>Alt+H</code> / <code>⌥+H</code> or <span class="menu-item">Board → Show Positional Heat-map</span>.</li>
                </ul>
                
                <h5 id="game-information-display">4.3.2 Game Information Display</h5>
                <p>The game information header at the top of the Main Panel shows:</p>
                <ul>
                    <li>Player names and ELO ratings from the game PGN metatags</li>
                    <li>Game result (1-0, 0-1, 1/2-1/2, or * for indecisive results)</li>
                    <li>Opening ECO code and name (e.g., "A00 - Unknown Opening")</li>
                </ul>
                <p>Toggle visibility with <code>Alt+I</code> / <code>⌥+I</code> or <span class="menu-item">Board → Show Game Info</span>.</p>
                
                <h5 id="evaluation-bar">4.3.3 Evaluation Bar</h5>
                <p>The evaluation bar appears on the left side of the chessboard and shows the engine's evaluation of the current position. The bar uses white and black colors: positive values (White advantage) are shown in white extending upward from the center, negative values (Black advantage) are shown in black extending downward from the center. The scale ranges from -1000 to +1000 centipawns, with division marks at 100, 200, 300, 500, and 1000 centipawns to help gauge the evaluation magnitude. Toggle with <code>Alt+E</code> / <code>⌥+E</code> or <span class="menu-item">Board → Show Evaluation Bar</span>. When the evaluation bar is shown, the status bar displays detailed engine information including the engine name, search depth, evaluation score, principal variation, and performance metrics such as nodes per second and hash table usage.</p>
                
                <p><strong>Note:</strong> The evaluation bar requires a chess engine to be assigned to the evaluation task. See <a href="#configuring-engines">section 5.1</a> for instructions on configuring engines.</p>
                
                <div class="tip-box">
                    <strong>Quick Tip:</strong> The evaluation bar normally uses the engine assigned to the evaluation task. However, if manual analysis is currently running, the evaluation bar automatically switches to use the manual analysis engine's data instead. This ensures efficient resource usage by avoiding simultaneous analysis of the same position by two concurrent engines.
                </div>
                
                <h5 id="material-widget">4.3.4 Material Widget</h5>
                <p>The material widget appears in the upper right corner of the chessboard and shows captured pieces and the material difference between the two sides. The widget updates automatically as you navigate through the game. Toggle with <code>Alt+U</code> / <code>⌥+U</code> or <span class="menu-item">Board → Show Material</span>.</p>
                
                <img src="screenshots/material_widget.png" alt="CARA Material Widget - Widget showing captured pieces and material difference displayed in the upper right corner of the chessboard" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <p>The widget is divided into three distinct sections, reading from top to bottom:</p>
                <ul>
                    <li><strong>Top section (White's captures):</strong> Displays pieces that White has captured from Black. The piece letters (P, N, B, R, Q) are always visible in light/white text color. Each letter is followed by a colon and a number indicating how many of that piece type have been captured. For example, "R:1" means White has captured one rook from Black, while "R:" (with no number after the colon) means no rooks have been captured yet.</li>
                    <li><strong>Middle section (Black's captures):</strong> Displays pieces that Black has captured from White, using the same notation format as the top section. The piece letters are shown in dark/gray text color to distinguish them from White's captures. For example, if you see "Q:1" in this section, it means Black has captured one queen from White.</li>
                    <li><strong>Bottom section (Material difference):</strong> Shows the material balance using the delta symbol (Δ) followed by a value in pawns. The notation appears as "Δ: ±X.X" where the value represents the material advantage. Positive values (e.g., "Δ: +2.0") indicate White has a material advantage, while negative values (e.g., "Δ: -1.0") indicate Black has the advantage. The calculation uses standard piece values: Pawn = 1.0, Knight/Bishop = 3.0 each, Rook = 5.0, and Queen = 9.0. This gives you a quick visual reference to see who's ahead in material at any point in the game.</li>
                </ul>
                <p>Pieces are displayed using standard chess notation letters: <strong>P</strong> for Pawn, <strong>N</strong> for Knight, <strong>B</strong> for Bishop, <strong>R</strong> for Rook, and <strong>Q</strong> for Queen.</p>
                
                <h5 id="turn-indicator">4.3.5 Turn Indicator</h5>
                <p>The turn indicator shows which side is to move in the current position. Toggle with <code>Alt+T</code> / <code>⌥+T</code> or <span class="menu-item">Board → Show Turn Indicator</span>.</p>
                
                <h5 id="positional-heatmap">4.3.6 Positional Heatmap</h5>
                <p>The positional heatmap is a color-coded overlay that visualizes positional factors for each piece on the chessboard. It helps you quickly identify positional strengths and weaknesses by displaying colored gradients on squares containing pieces.<br>Toggle with <code>Alt+H</code> / <code>⌥+H</code> or <span class="menu-item">Board → Show Positional Heat-map</span>.</p>
                
                <img src="screenshots/positional_heatmap.png" alt="CARA Positional Heatmap - Color-coded overlay showing positional factors on the chessboard with green gradients for strong positions and red gradients for weak positions" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <p>The heatmap evaluates nine positional factors:</p>
                <ul>
                    <li><strong>Passed Pawns:</strong> Pawns with no enemy pawns in front of them on the same or adjacent files. These are generally advantageous and shown in green.</li>
                    <li><strong>Backward Pawns:</strong> Pawns behind friendly pawns that cannot advance safely. These are positional weaknesses shown in red.</li>
                    <li><strong>Isolated Pawns:</strong> Pawns with no friendly pawns on adjacent files. These are vulnerable and shown in red.</li>
                    <li><strong>Doubled Pawns:</strong> Multiple pawns on the same file. These reduce pawn mobility and are shown in red.</li>
                    <li><strong>King Safety:</strong> Evaluates king safety based on open files, pawn shield, and exposure. Unsafe kings are shown in red, well-protected kings in green.</li>
                    <li><strong>Weak Squares:</strong> Squares that cannot be defended by pawns. Pieces on weak squares are shown in red.</li>
                    <li><strong>Piece Activity:</strong> Evaluates piece mobility and central control. Active pieces with good mobility are shown in green, inactive pieces in red.</li>
                    <li><strong>Undeveloped Pieces:</strong> Pieces still on starting squares and blocked. These are shown in red.</li>
                    <li><strong>Outpost Squares:</strong> Squares protected by friendly pawns that cannot be attacked by enemy pawns. Pieces on outpost squares (especially knights) are shown in green.</li>
                </ul>
                
                <p><strong>Color Coding:</strong> The heatmap uses color gradients to represent positional scores:</p>
                <ul>
                    <li><strong>Green:</strong> Positive positional factors (strong positions, active pieces, passed pawns, outposts)</li>
                    <li><strong>Red:</strong> Negative positional factors (weak squares, inactive pieces, pawn weaknesses, exposed kings)</li>
                    <li><strong>Yellow:</strong> Neutral positions (scores near zero)</li>
                </ul>
                <p>The intensity of the color indicates the strength of the positional factor—darker colors represent stronger effects. The heatmap only displays on squares that contain pieces, and each piece is evaluated from its own color's perspective.</p>
                
                <p><strong>Tooltip Information:</strong> Hovering your mouse over any piece displays a detailed tooltip showing:</p>
                <ul>
                    <li>The piece's overall positional assessment</li>
                    <li>Specific positional factors affecting the piece (with checkmarks for positive factors and warning symbols for negative factors)</li>
                    <li>Position status (whether the piece is under attack, defended, or both)</li>
                    <li>The combined evaluation score and breakdown by rule</li>
                </ul>
                <p>This detailed information helps you understand why a piece is evaluated as strong or weak and which specific positional factors contribute to the assessment.</p>
            </div>
            <div class="outline-item">
                <h4 id="database-panel">4.4 Database Panel</h4>
                <p>The Database Panel, located at the bottom of the application window, manages your chess game collections. It displays all open PGN databases in a tabbed interface, allowing you to work with multiple game collections simultaneously. Each database appears in its own tab, and you can switch between them by clicking the tab labels.</p>
                
                <img src="screenshots/databases.png" alt="CARA Database Panel - Tabbed interface at the bottom showing multiple open database tabs, game table with sortable columns displaying game metadata, and database management controls" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <h5 id="database-tabs">4.4.1 Database Tabs</h5>
                <p>The panel uses tabs to organize multiple databases:</p>
                <ul>
                    <li><strong>Clipboard Tab:</strong> Always appears first and contains games that have been pasted or imported temporarily. Unlike regular database tabs that are linked to PGN files on your computer, the Clipboard database itself does not exist as a file on disk. It's a special temporary database perfect for quickly pasting PGN games into the app. You can save its contents to a new PGN file at any time using <span class="menu-item">File → Save PGN Database as...</span> (<code>Ctrl+Shift+S</code> / <code>⌘+Shift+S</code>), or clear it at any time using <span class="menu-item">File → Clear Clipboard Database</span> (<code>Ctrl+Shift+C</code> / <code>⌘+Shift+C</code>).</li>
                    <li><strong>File-Based Database Tabs:</strong> Each opened PGN file appears as a separate tab, labeled with the filename (without extension). You can open multiple PGN files simultaneously, each in its own tab.</li>
                    <li><strong>Search Results Tab:</strong> When you perform a search across databases, the results appear in a dedicated "Search Results" tab. This tab includes an additional "Source DB" column showing which database each game came from.</li>
                    <li><strong>"+" Tab:</strong> Always appears last. Clicking this tab opens the file dialog to add a new PGN database to the panel.</li>
                </ul>
                
                <p>Each tab displays a pulsing orange dot indicator when the database has unsaved changes. This visual reminder helps you track which databases need to be saved. The indicator appears next to the tab label and pulses continuously until the database is saved.</p>
                
                <h5 id="game-table">4.4.2 Game Table</h5>
                <p>Each database tab displays a table listing all games in that database. The table includes the following columns:</p>
                <ul>
                    <li><strong>#:</strong> Game number within the database</li>
                    <li><strong>●:</strong> Indicates which games have unsaved changes</li>
                    <li><strong>White:</strong> White player's name</li>
                    <li><strong>Black:</strong> Black player's name</li>
                    <li><strong>WhiteElo:</strong> White player's ELO rating</li>
                    <li><strong>BlackElo:</strong> Black player's ELO rating</li>
                    <li><strong>Result:</strong> Game result (1-0, 0-1, 1/2-1/2, or *)</li>
                    <li><strong>Date:</strong> Game date</li>
                    <li><strong>Event:</strong> Tournament or event name</li>
                    <li><strong>Site:</strong> Location where the game was played</li>
                    <li><strong>Moves:</strong> Number of moves in the game</li>
                    <li><strong>ECO:</strong> Opening classification code</li>
                    <li><strong>Analyzed:</strong> Indicates whether the game has been analyzed</li>
                    <li><strong>Annotated:</strong> Indicates whether the game has custom CARA annotations (distinct from regular PGN notation annotations)</li>
                    <li><strong>Source DB:</strong> (Search Results only) Shows which database the game originated from</li>
                    <li><strong>PGN:</strong> Full PGN notation for the game</li>
                </ul>
                
                <h5 id="interacting-table">4.4.3 Interacting with the Table</h5>
                <p>You can interact with the game table in several ways:</p>
                <ul>
                    <li><strong>Selecting Games:</strong> Click a row to select a single game. Use <code>Shift+Click</code> to select a range of games, or <code>Ctrl+Click</code> / <code>⌘+Click</code> to select multiple individual games.</li>
                    <li><strong>Opening Games:</strong> Double-click any row to open that game in the main panel for review and analysis. The chessboard, moves list, and all other views update to show the selected game.</li>
                    <li><strong>Sorting:</strong> Click any column header to sort the table by that column. Click again to reverse the sort order. The sort indicator arrow shows the current sort column and direction.</li>
                    <li><strong>Resizing Columns:</strong> Drag the borders between column headers to resize columns. Most columns can be resized, while the PGN column always stretches to fill the remaining space.</li>
                </ul>
                
                <h5 id="panel-management">4.4.4 Panel Management</h5>
                <p>The Database Panel can be collapsed to maximize space for the main and detail panels. Double-click the horizontal splitter handle above the panel, or use <span class="menu-item">View → Hide Database Panel</span> (<code>Ctrl+Shift+D</code> / <code>⌘+Shift+D</code>) to toggle its visibility. When collapsed, the panel is minimized to a thin strip, and you can expand it again using the same method.</p>
                
                <p>The panel automatically updates when games are added, removed, or modified in any database. Changes are reflected immediately in the table view, and unsaved indicators appear as needed to help you track which databases contain games with unsaved changes.</p>
                
                <h5 id="common-database-actions">4.4.5 Common Database Actions</h5>
                <p>You can perform common database operations using the File menu or keyboard shortcuts:</p>
                <ul>
                    <li><strong>Open PGN Database:</strong> Use <span class="menu-item">File → Open PGN Database</span> (<code>Ctrl+O</code> / <code>⌘+O</code>) to open one or multiple PGN files. In the file dialog, you can select multiple files by clicking and dragging, holding <code>Ctrl</code> / <code>⌘</code> for individual selection, or <code>Shift</code> for range selection. Each file appears as a separate tab in the Database Panel.</li>
                    <li><strong>Save PGN Database:</strong> Use <span class="menu-item">File → Save PGN Database</span> (<code>Ctrl+S</code> / <code>⌘+S</code>) to save the active database. This overwrites the existing database file with the current contents.</li>
                    <li><strong>Save PGN Database as...</strong>: Use <span class="menu-item">File → Save PGN Database as...</span> (<code>Ctrl+Shift+S</code> / <code>⌘+Shift+S</code>) to save the active database as a new copy.</li>
                    <li><strong>Close PGN Database:</strong> Use <span class="menu-item">File → Close PGN Database</span> (<code>Ctrl+W</code> / <code>⌘+W</code>) to close the active database tab.</li>
                </ul>
                
                <div class="tip-box">
                    <strong>Quick Tip:</strong> You can quickly paste PGN games from your system clipboard into either the Clipboard database or the active database. If you have PGN text copied to your clipboard (from another application, a website, or elsewhere), use <span class="menu-item">Edit → Paste PGN to Clipboard DB</span> (<code>Ctrl+V</code> / <code>⌘+V</code>) to paste into the Clipboard database, or <span class="menu-item">Edit → Paste PGN to active DB</span> (<code>Ctrl+Alt+V</code> / <code>⌘+⌥+V</code>) to paste into the active database instead.
                </div>
            </div>
            <div class="outline-item">
                <h4 id="detail-panel">4.5 Detail Panel</h4>
                <p>The Detail Panel contains the PGN Notation Pane at the top and a set of tabbed views below for detailed analysis.</p>
                
                <p>The PGN Notation Pane displays the complete PGN notation for the current game. The PGN notation contains several different types of elements:</p>
                <ul>
                    <li><strong>Moves:</strong> The actual chess moves displayed in standard algebraic notation (e.g., e4, Nf3, O-O). These are the main-line moves that make up the game sequence.</li>
                    <li><strong>Comments:</strong> Text annotations that explain moves or positions. Comments can appear after moves or at the beginning of variations to provide additional context or analysis.</li>
                    <li><strong>Variations:</strong> Also called branches, these show alternative lines of play. Variations are enclosed in parentheses and represent moves that could have been played instead of the main-line moves.</li>
                    <li><strong>Annotations:</strong> Move quality assessments that include symbol-based annotations (!, !!, ?, ??, !?, ?!) and NAGs (Numeric Annotation Glyphs). When PGN files are loaded, symbol-based annotations are automatically converted to NAGs (Numeric Annotation Glyphs) by the PGN parser, and both are displayed as readable text descriptions in parentheses (e.g., "good move", "poor move", "very good move", "very poor move", "speculative move", "questionable move", "White has a slight advantage").</li>
                    <li><strong>Non-standard tags:</strong> Special tags that some chess software uses to encode additional information within comments, such as clock times, position evaluations, or material balance data. These appear as codes like [%evp] and [%mdl] within comment text.</li>
                    <li><strong>Metadata tags:</strong> PGN header tags (Event, Site, Date, White, Black, Result, ECO, etc.) that provide information about the game, players, and tournament details.</li>
                    <li><strong>Game result:</strong> The final outcome of the game (1-0 for White wins, 0-1 for Black wins, 1/2-1/2 for a draw).</li>
                </ul>
                <p>The content is displayed in a formatted, color-coded view with syntax highlighting to distinguish between different elements.</p>
                
                <p>As you navigate through the game using the <code>←</code> (Left Arrow) and <code>→</code> (Right Arrow) keys, the active move is highlighted in the PGN notation. Alternatively, you can click on any main-line move in the PGN notation to jump directly to that position in the game. Note that clicking on variation moves, comments, or metadata tags does not trigger navigation—only main-line moves are clickable.</p>
                
                <img src="screenshots/detail_panel.png" alt="CARA Detail Panel - Right-side panel showing PGN notation pane at the top and seven tabs below (Moves List, Metadata, Manual Analysis, Game Summary, Player Stats, Annotations, AI Summary) for detailed game analysis" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <p>You can control what elements are displayed in the PGN Notation Pane using the PGN menu. The following options are available:</p>
                <ul>
                    <li><span class="menu-item">PGN → Show Metadata</span> (<code>Ctrl+M</code> / <code>⌘+M</code>): Toggle display of PGN header tags (Event, Site, Date, etc.)</li>
                    <li><span class="menu-item">PGN → Show Comments</span> (<code>Ctrl+Shift+M</code> / <code>⌘+Shift+M</code>): Toggle display of move comments</li>
                    <li><span class="menu-item">PGN → Show Variations</span> (<code>Ctrl+Shift+V</code> / <code>⌘+Shift+V</code>): Toggle display of move variations</li>
                    <li><span class="menu-item">PGN → Show Non-Standard Tags</span> (<code>Ctrl+Shift+T</code> / <code>⌘+Shift+T</code>): Toggle display of non-standard tags like [%evp] and [%mdl] within comments</li>
                    <li><span class="menu-item">PGN → Show Annotations</span> (<code>Ctrl+Shift+A</code> / <code>⌘+Shift+A</code>): Toggle display of move annotations, including symbol-based annotations (!, !!, ?, ??, !?, ?!) and NAGs (Numeric Annotation Glyphs).</li>
                    <li><span class="menu-item">PGN → Show Results</span> (<code>Ctrl+R</code> / <code>⌘+R</code>): Toggle display of game results (1-0, 0-1, 1/2-1/2)</li>
                </ul>
                
                <p>The PGN menu also provides options to permanently remove elements from the game's PGN. The following options are available:</p>
                <ul>
                    <li><span class="menu-item">PGN → Remove Comments</span>: Permanently remove all comments from the game's PGN notation</li>
                    <li><span class="menu-item">PGN → Remove Variations</span>: Permanently remove all move variations from the game's PGN notation</li>
                    <li><span class="menu-item">PGN → Remove Non-Standard Tags</span>: Permanently remove non-standard tags (like [%evp] and [%mdl]) from comments in the game's PGN</li>
                    <li><span class="menu-item">PGN → Remove Annotations</span>: Permanently remove all move annotations (symbols and NAGs) from the game's PGN notation</li>
                </ul>
                <p>These changes modify the game's actual PGN content which will persist when you save the database.</p>
                
                <p>Below the PGN Notation Pane, the Detail Panel contains seven tabs, each offering distinct functionality for analyzing and working with the active game:</p>
                
                <h5 id="moves-list">4.5.1 Moves List</h5>
                <p>The Moves List tab displays all moves in a table format with comprehensive per-move information. The table includes columns for move notation, evaluations, move classifications, best move alternatives, Centipawn Loss (CPL) values, engine depth, material counts, FEN positions, and more. You can customize which columns are visible and their display order using column profiles. The active move is highlighted as you navigate through the game. You can click on any move in the table to jump to that position in the game. Access this tab using <span class="menu-item">View → Moves List</span> or press <code>F1</code>.</p>
                
                <img src="screenshots/moves_list.png" alt="CARA Moves List - Table view showing move notation, evaluations, classifications, CPL values, and other analysis columns" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <p>The application comes with several pre-configured column profiles that organize the available columns for different analysis purposes. Switch between profiles using the number keys <code>1</code> through <code>9</code> (assigned to the first nine profiles in order), or select them from the <span class="menu-item">Moves List</span> menu. The following default profiles are available:</p>
                <ul>
                    <li><strong>Default</strong> (<code>1</code>): A minimal view showing only the move number, White and Black moves, and comments. Use this profile when you want a clean, uncluttered view focused on the moves themselves.</li>
                    <li><strong>Moves and Opening Info</strong> (<code>2</code>): Displays moves along with ECO codes and opening names. This profile is useful for studying opening theory and identifying which openings were played in your games.</li>
                    <li><strong>Game Analysis - Full</strong> (<code>3</code>): Shows the most important analysis columns for both White and Black moves, including evaluations, CPL values, move assessments, best move alternatives, engine depth, and top-3 move indicators. Use this comprehensive profile when you want to analyze both sides' play in detail, comparing evaluations and move quality for the entire game.</li>
                    <li><strong>Game Analysis - White Side</strong> (<code>4</code>): Focuses exclusively on White's moves and their analysis. All White-related columns are visible (evaluations, CPL, assessments, best moves, depth), while Black's analysis columns are hidden. This profile is ideal when you played White and want to focus on analyzing your own moves without the distraction of your opponent's move evaluations.</li>
                    <li><strong>Game Analysis - Black Side</strong> (<code>5</code>): Focuses exclusively on Black's moves and their analysis. All Black-related columns are visible, while White's analysis columns are hidden. Use this profile when you played Black and want to concentrate on your own moves.</li>
                </ul>
                <p>You can modify any of these default profiles or create your own custom profiles. For smaller adjustments, you can reorder columns by dragging and dropping column headers in the moves list, resize columns by dragging column borders, and show or hide columns using the <span class="menu-item">Moves List</span> menu. For configuring multiple columns at once, use <span class="menu-item">Moves List → Setup Profile...</span> which provides a convenient dialog for managing all column settings. After making changes, save them with <span class="menu-item">Moves List → Save Profile</span> (to update the current profile) or <span class="menu-item">Moves List → Save Profile as...</span> (to create a new profile with a custom name). Custom profiles you create will also be accessible via number keys <code>1</code> through <code>9</code> based on their position in the profile list.</p>
                
                <p>For a complete reference of all available columns and their descriptions, see <a href="#moves-list-columns-reference">section 7.7 "Moves List Columns Reference"</a>.</p>
                
                <h5 id="metadata">4.5.2 Metadata</h5>
                <p>The Metadata tab displays all PGN header tags (metadata) for the current game in an editable table format. You can view, edit, add, and remove tags. Common tags include Event, Site, Date, Round, White, Black, Result, ECO, WhiteElo, and BlackElo. Changes to metadata are applied to the game's PGN data in memory. The database is marked as having unsaved changes, and your modifications will be persisted to the database file when you save it. Access this tab using <span class="menu-item">View → Metadata</span> or press <code>F2</code>.</p>
                
                <img src="screenshots/metadata.png" alt="CARA Metadata View - Editable table showing PGN header tags with Add and Remove buttons" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <p>To edit a tag value, double-click on the value cell in the table and type the new value. Tag names cannot be edited, but you can remove a tag and add a new one with a different name if needed. To add a new tag, click the <strong>Add</strong> button at the top of the metadata view, enter the tag name and value in the dialog, then click OK. To remove a tag, select the tag row in the table and click the <strong>Remove</strong> button. You will be asked to confirm the removal. Note that some tags (such as CARA analysis and annotation tags) are read-only and cannot be edited or removed.</p>
                
                <h5 id="manual-analysis">4.5.3 Manual Analysis</h5>
                <p>The Manual Analysis tab provides continuous engine analysis of the current position with MultiPV (Multiple Principal Variations) support. Access this tab using <span class="menu-item">View → Manual Analysis</span> or press <code>F3</code>.</p>
                
                <p><strong>Note:</strong> Manual analysis requires a chess engine to be assigned to the manual analysis task. See <a href="#configuring-engines">section 5.1</a> for instructions on configuring engines.</p>
                
                <img src="screenshots/manual_analysis.png" alt="CARA Manual Analysis View - MultiPV analysis display showing principal variation lines with evaluations, depths, and move sequences" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <p><strong>MultiPV Analysis:</strong> The standard analysis mode displays multiple candidate moves and their evaluations. You can analyze any number of principal variation lines simultaneously, each displaying the engine's recommended moves, evaluations, and depths. The first three PV lines (PV1, PV2, PV3) have color-coded indicators in the analysis display that match the colors of the corresponding arrows on the chessboard when enabled. This visual connection helps you quickly identify which analysis line corresponds to which arrow on the board. The following options are available:</p>
                <ul>
                    <li><span class="menu-item">Manual Analysis → Start Manual Analysis</span> (<code>Alt+M</code> / <code>⌥+M</code>): Start or stop continuous engine analysis of the current position</li>
                    <li><span class="menu-item">Manual Analysis → Add PV Line</span> (<code>Alt+N</code> / <code>⌥+N</code>): Add an additional principal variation line</li>
                    <li><span class="menu-item">Manual Analysis → Remove PV Line</span> (<code>Alt+R</code> / <code>⌥+R</code>): Remove the last added PV line (requires at least two lines)</li>
                    <li><span class="menu-item">Manual Analysis → Enable miniature preview</span>: Toggle display of a miniature board preview when hovering over PV moves</li>
                </ul>
                
                <p><strong>Positional Plan Exploration:</strong> This unique feature helps you understand the engine's positional plans by visualizing where the engine wants to move specific pieces and how they coordinate through the recommended sequence. Instead of just seeing individual moves, you can see the complete trajectory of each piece—where it starts, where it moves to, and the path it takes through multiple moves. The system automatically identifies the pieces that move most frequently in each PV line and tracks their movement patterns. Each of these selected pieces is assigned a distinct color and highlighted in that color in the PV display, while on the chessboard, their trajectories are visualized as colored lines connecting the squares each piece visits through the engine's suggested sequence. This helps you recognize positional themes, piece coordination patterns, and strategic plans that might not be immediately obvious from traditional engine analysis alone.</p>
                
                <img src="screenshots/positional_plans_piece_trajectories.png" alt="CARA Positional Plan Exploration - Chessboard showing colored piece trajectories visualizing engine's recommended piece movement patterns" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <p>The following options are available:</p>
                <ul>
                    <li><span class="menu-item">Manual Analysis → Explore PV1 Positional Plans</span>: Enable plan exploration for the first principal variation line</li>
                    <li><span class="menu-item">Manual Analysis → Explore PV2 Positional Plans</span>: Enable plan exploration for the second principal variation line</li>
                    <li><span class="menu-item">Manual Analysis → Explore PV3 Positional Plans</span>: Enable plan exploration for the third principal variation line</li>
                    <li><span class="menu-item">Manual Analysis → Max number of pieces to explore</span>: Configure how many pieces to track in the trajectory visualization (1-3 pieces). The system selects the pieces that move most frequently in the PV line up to this limit</li>
                    <li><span class="menu-item">Manual Analysis → Max Exploration depth</span>: Set the exploration depth for piece trajectories (2-4 moves ahead), determining how many moves into the future the trajectory visualization extends</li>
                </ul>
                
                <h5 id="game-summary">4.5.4 Game Summary</h5>
                <p>The Game Summary tab provides a comprehensive overview of the current game by synthesizing data from the Game Analysis function into key performance indicators (KPIs) and valuable insights. Access this tab using <span class="menu-item">View → Game Summary</span> or press <code>F4</code>.</p>
                
                <div class="tip-box">
                    <strong>Quick Tip:</strong> The Game Summary is only available after running game analysis using <span class="menu-item">Game Analysis → Start Game Analysis</span> (<code>Ctrl+G</code> / <code>⌘+G</code>).
                </div>
                
                <img src="screenshots/game_summary.png" alt="CARA Game Summary View - Evaluation graph, key statistics, move classification charts, phase analysis, game highlights, and critical moments" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <p><strong>Evaluation Graph:</strong> At the top of the view, a visual graph shows how the position evaluation changed throughout the game over time. The graph includes indicators marking phase transitions (opening to middlegame, middlegame to endgame) and highlights the worst and best moves for each player, making it easy to see critical moments and how the game's balance shifted. The graph is displayed in a resizable panel that can be adjusted to show more or less detail.</p>
                
                <img src="screenshots/evaluation_graph.png" alt="CARA Evaluation Graph - Visual graph showing position evaluation changes throughout the game with phase transitions and critical move indicators" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <p>The evaluation graph supports two display modes that you can toggle using <span class="menu-item">Game Analysis → Normalized Evaluation Graph</span> (<code>Ctrl+Shift+N</code> / <code>⌘+Shift+N</code>):</p>
                <ul>
                    <li><strong>Zero-based mode:</strong> In this mode, 0.00 (equal position) is displayed at the bottom of the graph. Positive evaluations (White advantage) extend upward, and negative evaluations (Black advantage) extend downward from the zero line.</li>
                    <li><strong>Normalized mode:</strong> In this mode, 0.00 (equal position) is displayed in the middle of the graph with a symmetric scale. This mode is particularly useful for games with large evaluation swings, as it provides better visual balance and makes it easier to see relative changes in evaluation throughout the game.</li>
                </ul>
                
                <p><strong>Key Statistics:</strong> The summary displays per-player statistics for both White and Black, including:</p>
                <ul>
                    <li><strong>Accuracy percentage:</strong> Overall move quality score based on analysis</li>
                    <li><strong>Average Centipawn Loss (CPL):</strong> Average deviation from optimal play measured in centipawns</li>
                    <li><strong>Estimated ELO:</strong> An estimated playing strength rating based on the player's move quality in this specific game. This is a best-effort approximation that may not accurately reflect a player's true rating, especially since it's calculated from a single game rather than a statistical sample across many games. The estimate considers average move quality, blunders, and mistakes to provide a rough indication of playing strength, but should be interpreted with caution.</li>
                </ul>
                
                <div class="tip-box">
                    <strong>Quick Tip:</strong> You can customize the formulas used to calculate accuracy percentage and estimated ELO to match your preferences. See <a href="#customizing-formulas">section 7.8 "Customizing ELO and Accuracy Formulas"</a> for details on available variables, functions, and examples.
                </div>
                
                <p><strong>Move Classification:</strong> The view displays pie charts showing the distribution of move quality throughout the game for each player. You can see how many moves were strong (Best Move, Good Move, Brilliant) versus how many were errors (Inaccuracy, Mistake, Blunder), giving you a quick visual overview of each player's performance. The charts also show book moves and missed opportunities.</p>
                
                <img src="screenshots/move_classification.png" alt="CARA Move Classification - Pie charts showing distribution of move quality (Best Move, Good Move, Brilliant, Inaccuracy, Mistake, Blunder) for each player" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <p><strong>Phase Analysis:</strong> The view breaks down performance for each player across the three phases of a chess game—Opening, Middlegame, and Endgame—showing how each player performed in different stages of the game. This helps you identify strengths and weaknesses in specific phases. Each phase section shows accuracy, average CPL, and move counts for that phase. The system automatically detects phase boundaries based on opening theory, material exchanges, and endgame classification. When an endgame is detected, the system also classifies the specific endgame type (such as Pawn Endgame, Rook Endgame, Minor Piece Endgame, or Queen Endgame) based on the material composition, which is displayed in the phase analysis section.</p>
                
                <img src="screenshots/phase_analysis.png" alt="CARA Phase Analysis - Performance breakdown by game phase (Opening, Middlegame, Endgame) showing accuracy, average CPL, and move counts for each phase" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <p><strong>Game Highlights:</strong> The view displays detected tactical and positional patterns that occurred during the game. Highlights are organized by game phase and help you quickly identify key moments. Each highlight entry is a clickable link that navigates directly to the move where the pattern occurred, allowing you to quickly review the position and context.</p>
                
                <p><strong>Critical Moments:</strong> The summary identifies the top best and worst moves for each player, allowing you to quickly review and navigate to critical moments in the game. Each critical moment shows the move number, move notation, evaluation, and best alternative move when applicable. Each critical moment entry is a clickable link that navigates directly to that move in the game, making it easy to jump to and analyze these important positions.</p>
                
                <p>This comprehensive overview helps you quickly understand the flow of the game, identify critical moments, and assess each player's performance across different phases of play.</p>
                
                <div class="tip-box">
                    <strong>Quick Tip:</strong> To analyze multiple games at once, use <span class="menu-item">Game Analysis → Bulk Analyze Database...</span>. The dialog lets you choose between analyzing all games or only selected games. When you start the analysis, progress and estimated time remaining are displayed in the status bar. You can cancel the analysis at any time and resume it later.
                </div>
                
                <h5 id="player-stats">4.5.5 Player Stats</h5>
                <p>The Player Stats tab displays extensive aggregated statistics across multiple games for any selected player. Access this tab using <span class="menu-item">View → Player Stats</span> or press <code>F5</code>.</p>
                
                <p><strong>Requirements:</strong> This view is only available for players who have at least two analyzed games in the selected data source. You can choose to analyze players from either the active database or all open databases.</p>
                
                <img src="screenshots/player_stats.png" alt="CARA Player Stats View - Aggregated statistics showing overall performance, phase breakdown, opening analysis, and error patterns for a selected player" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <p><strong>Overall Performance:</strong> The system aggregates statistics from all analyzed games for the selected player, calculating overall performance metrics including accuracy, average Centipawn Loss, estimated ELO, win rate, and move classification distributions.</p>
                
                <p><strong>Phase Breakdown:</strong> The view breaks down performance by game phase (Opening, Middlegame, Endgame), showing how the player performs in different stages of play. This helps identify strengths and weaknesses in specific phases.</p>
                
                <p><strong>Opening Analysis:</strong> The system tracks opening usage and accuracy, identifying which openings the player plays most frequently and how well they perform in each opening.</p>
                
                <p><strong>Error Pattern Detection:</strong> The system automatically detects error patterns such as phase-specific blunder tendencies, tactical misses, opening-specific errors, consistently high Centipawn Loss, missed opportunities, and conversion issues in winning positions.</p>
                
                <p><strong>Background Updates:</strong> The view updates asynchronously in the background when databases change, ensuring you always have current data without blocking the interface.</p>
                
                <h5 id="annotations">4.5.6 Annotations</h5>
                <p>The Annotations tab provides tools for creating and managing custom CARA annotations on the chessboard. Unlike regular PGN annotations, CARA annotations include free-form text that can be positioned anywhere on the board, adjusted in size and rotated.</p>
                
                <p>You can also add arrows, circles, and square highlighting with customizable colors. Annotations are position-specific, attached to individual moves in the game, and are compressed and serialized in a PGN metadata tag to keep the PGN move notation clean.</p>
                
                <p>Access this tab using <span class="menu-item">View → Annotations</span> or press <code>F6</code>.</p>
                
                <img src="screenshots/annotations.png" alt="CARA Annotations View - Tools for creating custom annotations on the chessboard including text, arrows, circles, and square highlighting" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <h5 id="ai-summary">4.5.7 AI Summary</h5>
                <p>The AI Summary tab provides an interactive chat interface for discussing any position in a game with a Large Language Model (LLM). The AI model has access to extensive game data, including detailed engine analysis, move classifications, evaluation metrics, and positional information, enabling it to provide accurate assessments of the game, played moves, and current position. You can ask questions about the game, request explanations of moves, or generate summaries. Access this tab using <span class="menu-item">View → AI Summary</span> or press <code>F7</code>.</p>
                
                <img src="screenshots/ai_summary.png" alt="CARA AI Summary View - Interactive chat interface for discussing game positions with an AI model that has access to engine analysis and game data" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <div class="tip-box">
                    <strong>Quick Tip:</strong> To use the AI Summary feature, you must first set up an OpenAI or Anthropic API key. Configure your API key using <span class="menu-item">AI Summary → AI Model Settings...</span>.
                </div>
            </div>
            <div class="outline-item">
                <h4 id="keyboard-shortcuts">4.6 Keyboard Shortcuts</h4>
                <p>Below you can find a list of the most common keyboard shortcuts, allowing you to work efficiently with the features described in this section. For a complete reference of all keyboard shortcuts organized by category, see <a href="#complete-keyboard-shortcuts">section 6.12</a>.</p>
                
                <h5>4.6.1 Navigation</h5>
                <ul>
                    <li><code>←</code> (Left Arrow): Navigate to the previous move in the game</li>
                    <li><code>→</code> (Right Arrow): Navigate to the next move in the game</li>
                </ul>
                
                <h5>4.6.2 Board Controls</h5>
                <ul>
                    <li><code>X</code>: Rotate the board 180 degrees</li>
                    <li><code>Alt+C</code> / <code>⌥+C</code>: Toggle coordinates display</li>
                    <li><code>Alt+T</code> / <code>⌥+T</code>: Toggle turn indicator</li>
                    <li><code>Alt+P</code> / <code>⌥+P</code>: Toggle played move arrow</li>
                    <li><code>Alt+B</code> / <code>⌥+B</code>: Toggle best next move arrow (PV1)</li>
                    <li><code>Alt+2</code> / <code>⌥+2</code>: Toggle PV2 arrow</li>
                    <li><code>Alt+3</code> / <code>⌥+3</code>: Toggle PV3 arrow</li>
                    <li><code>Alt+A</code> / <code>⌥+A</code>: Toggle best alternative move arrow</li>
                    <li><code>Alt+H</code> / <code>⌥+H</code>: Toggle positional heatmap</li>
                    <li><code>Alt+E</code> / <code>⌥+E</code>: Toggle evaluation bar</li>
                    <li><code>Alt+U</code> / <code>⌥+U</code>: Toggle material widget</li>
                    <li><code>Alt+I</code> / <code>⌥+I</code>: Toggle game information display</li>
                    <li><code>Alt+L</code> / <code>⌥+L</code>: Toggle annotations layer</li>
                </ul>
                
                <h5>4.6.3 Database Operations</h5>
                <ul>
                    <li><code>Ctrl+Shift+F</code> / <code>⌘+Shift+F</code>: Search games across databases</li>
                    <li><code>Ctrl+Shift+W</code> / <code>⌘+Shift+W</code>: Close search results</li>
                    <li><code>Ctrl+Shift+I</code> / <code>⌘+Shift+I</code>: Import online games</li>
                    <li><code>Ctrl+Shift+R</code> / <code>⌘+Shift+R</code>: Bulk replace in databases</li>
                    <li><code>Ctrl+Alt+T</code> / <code>⌘+⌥+T</code>: Bulk tag games</li>
                    <li><code>Ctrl+Shift+L</code> / <code>⌘+Shift+L</code>: Bulk clean PGN</li>
                    <li><code>Ctrl+Shift+U</code> / <code>⌘+Shift+U</code>: Deduplicate games</li>
                </ul>
                
                <h5>4.6.4 Detail Panel Tabs</h5>
                <ul>
                    <li><code>F1</code>: Switch to Moves List tab</li>
                    <li><code>F2</code>: Switch to Metadata tab</li>
                    <li><code>F3</code>: Switch to Manual Analysis tab</li>
                    <li><code>F4</code>: Switch to Game Summary tab</li>
                    <li><code>F5</code>: Switch to Player Stats tab</li>
                    <li><code>F6</code>: Switch to Annotations tab</li>
                    <li><code>F7</code>: Switch to AI Summary tab</li>
                </ul>
                
                <h5>4.6.5 Game Analysis</h5>
                <ul>
                    <li><code>Ctrl+G</code> / <code>⌘+G</code>: Start game analysis for the current game</li>
                    <li><code>Escape</code>: Cancel ongoing game analysis</li>
                    <li><code>Ctrl+Shift+N</code> / <code>⌘+Shift+N</code>: Toggle normalized evaluation graph mode</li>
                    <li><code>Ctrl+Shift+K</code> / <code>⌘+Shift+K</code>: Configure move classification settings</li>
                </ul>
                
                <h5>4.6.6 Manual Analysis</h5>
                <ul>
                    <li><code>Alt+M</code> / <code>⌥+M</code>: Start or stop continuous engine analysis of the current position</li>
                    <li><code>Alt+N</code> / <code>⌥+N</code>: Add an additional principal variation line</li>
                    <li><code>Alt+R</code> / <code>⌥+R</code>: Remove the last added PV line</li>
                </ul>
                
                <h5>4.6.7 File Operations</h5>
                <ul>
                    <li><code>Ctrl+O</code> / <code>⌘+O</code>: Open PGN database</li>
                    <li><code>Ctrl+S</code> / <code>⌘+S</code>: Save active PGN database</li>
                    <li><code>Ctrl+Shift+S</code> / <code>⌘+Shift+S</code>: Save active PGN database as...</li>
                    <li><code>Ctrl+W</code> / <code>⌘+W</code>: Close active PGN database</li>
                    <li><code>Ctrl+Q</code> / <code>⌘+Q</code>: Close application</li>
                </ul>
                
                <h5>4.6.8 Edit Operations</h5>
                <ul>
                    <li><code>Ctrl+V</code> / <code>⌘+V</code>: Paste PGN to Clipboard database</li>
                    <li><code>Ctrl+Alt+V</code> / <code>⌘+⌥+V</code>: Paste PGN to active database</li>
                    <li><code>Ctrl+P</code> / <code>⌘+P</code>: Copy PGN to clipboard</li>
                    <li><code>Shift+F</code>: Copy FEN to clipboard</li>
                    <li><code>Ctrl+F</code> / <code>⌘+F</code>: Paste FEN to board</li>
                    <li><code>Ctrl+Shift+C</code> / <code>⌘+Shift+C</code>: Copy selected games</li>
                    <li><code>Ctrl+Shift+X</code>: Cut selected games</li>
                </ul>
                
                <h5>4.6.9 PGN Display Options</h5>
                <ul>
                    <li><code>Ctrl+M</code> / <code>⌘+M</code>: Toggle metadata display</li>
                    <li><code>Ctrl+Shift+M</code> / <code>⌘+Shift+M</code>: Toggle comments display</li>
                    <li><code>Ctrl+Shift+V</code> / <code>⌘+Shift+V</code>: Toggle variations display</li>
                    <li><code>Ctrl+Shift+T</code> / <code>⌘+Shift+T</code>: Toggle non-standard tags display</li>
                    <li><code>Ctrl+Shift+A</code> / <code>⌘+Shift+A</code>: Toggle annotations display</li>
                    <li><code>Ctrl+R</code> / <code>⌘+R</code>: Toggle results display</li>
                </ul>
                
                <h5>4.6.10 Moves List Profiles</h5>
                <ul>
                    <li><code>1</code> - <code>9</code>: Switch to column profile 1 through 9</li>
                    <li><code>Ctrl+Shift+P</code> / <code>⌘+Shift+P</code>: Save current profile</li>
                    <li><code>Ctrl+Alt+P</code> / <code>⌘+⌥+P</code>: Save current profile as...</li>
                    <li><code>Ctrl+Shift+Delete</code> / <code>⌘+Shift+Delete</code>: Remove current profile</li>
                </ul>
                
                <h5>4.6.11 Annotations</h5>
                <ul>
                    <li><code>Ctrl+Alt+S</code>: Save annotations</li>
                    <li><code>Ctrl+Shift+D</code> / <code>⌘+Shift+D</code>: Clear all annotations</li>
                    <li><code>Ctrl+Alt+D</code>: Clear move annotations</li>
                </ul>
                
                <h5>4.6.12 View Options</h5>
                <ul>
                    <li><code>Ctrl+Shift+D</code> / <code>⌘+Shift+D</code>: Toggle database panel visibility</li>
                </ul>
                
                <h5>4.6.13 Engine Configuration</h5>
                <ul>
                    <li><code>Ctrl+E</code>: Add or configure chess engine</li>
                </ul>
            </div>
            <div class="outline-item">
                <h4 id="first-game-analysis">4.7 Your First Game Analysis</h4>
                <p>Follow these steps to analyze your first game:</p>
                
                <ol>
                    <li><strong>Ensure you have a chess engine configured:</strong><br>
                    Before starting, make sure you have at least one UCI-compatible chess engine added to CARA. See <a href="#configuring-engines">section 5.1</a> for instructions on configuring engines. If you're unsure which engine to choose, <a href="https://stockfishchess.org/download/" target="_blank">Stockfish</a> is an excellent free option to get started.</li>
                    
                    <li><strong>Open a game or paste PGN:</strong><br>
                    Open a PGN database using <span class="menu-item">File → Open PGN Database</span> (<code>Ctrl+O</code> / <code>⌘+O</code>), or paste PGN text into the Clipboard database using <span class="menu-item">Edit → Paste PGN to Clipboard DB</span> (<code>Ctrl+V</code> / <code>⌘+V</code>)—the pasted game gets loaded automatically.</li>
                    
                    <li><strong>Switch to the Moves List view:</strong><br>
                    Press <code>F1</code> to switch to the Moves List tab, then press <code>3</code> to select the "Game Analysis - Full" profile. This profile displays all the important analysis columns you'll need to review the game.</li>
                    
                    <li><strong>Start the game analysis:</strong><br>
                    Press <code>Ctrl+G</code> / <code>⌘+G</code> (or use <span class="menu-item">Game Analysis → Start Game Analysis</span>) to begin analyzing the game. Watch as the moves list fills in with evaluation data, move classifications, CPL values, and best move alternatives as the analysis progresses. Progress and estimated time remaining are shown in the status bar.</li>
                    
                    <li><strong>Review the results:</strong><br>
                    Once analysis completes, you can review the per-move analysis directly in the Moves List, or press <code>F4</code> to switch to the Game Summary tab for a condensed overview showing key statistics, the evaluation graph, critical moments, and detected game highlights.</li>
                </ol>
            </div>
        </section>

        <!-- 5. COMMON TASKS -->
        <section id="tasks">
            <h2>5. Common Tasks</h2>
            
            <div class="outline-item">
                <h4 id="configuring-engines">5.1 Configuring Engines</h4>
                <p>CARA requires at least one UCI-compatible chess engine to perform game analysis. Adding your first engine is straightforward and doesn't require any special configuration—default settings are usually sufficient to get started.</p>
                
                <p>There are two general types of chess engines you can use with CARA:</p>
                <ul>
                    <li><strong>Conventional alpha-beta search engines</strong> (e.g., Stockfish, Berserk, Komodo): These engines use traditional search algorithms and are typically faster, making them ideal for quick analysis and when you need responsive performance. They work well on standard CPUs and don't require specialized hardware.</li>
                    <li><strong>Neural network-based engines</strong> (e.g., Leela Chess Zero, Maia): These engines use machine learning models and often provide different evaluation perspectives compared to conventional engines. They are generally slower than conventional engines and may benefit from a powerful graphics card (GPU) for optimal performance. They can be useful when you want alternative analysis perspectives on positions. For example, with sufficient hardware, you can use neural network-based engines with the <a href="#manual-analysis-task">manual analysis function</a> to get a different perspective than you would from using a conventional engine.</li>
                </ul>
                <p>For most users, starting with a conventional engine like Stockfish is recommended due to its speed and strength. You can always add additional engines later to compare different analysis approaches.</p>
                
                <h5 id="adding-first-engine">5.1.1 Adding Your First Engine</h5>
                <p>To add your first engine:</p>
                <ol>
                    <li><strong>Open the engine dialog:</strong><br>
                    Use <span class="menu-item">Engines → Add Engine...</span> or press <code>Ctrl+E</code>.</li>
                    
                    <li><strong>Select the engine executable:</strong><br>
                    Click "Browse" to locate your chess engine executable file (e.g., <code>stockfish.exe</code> for Stockfish on Windows).</li>
                    
                    <li><strong>Validate the engine:</strong><br>
                    CARA will automatically validate that the engine supports the UCI protocol. The engine name, author, and version will be detected automatically.</li>
                    
                    <li><strong>Add the engine:</strong><br>
                    Click "Add" to add the engine. The first engine you add will automatically be assigned to all analysis tasks (game analysis, evaluation, and manual analysis), so you can start analyzing games immediately. You can reassign this engine or add additional engines later (see <a href="#adding-additional-engines">section 5.1.2</a>).</li>
                </ol>
                
                <img src="screenshots/add_engine_dialog.png" alt="CARA Add Engine Dialog - Dialog for adding UCI chess engines with browse button, validation, and engine information fields" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <div class="tip-box">
                    <strong>Quick Tip:</strong> If you don't have a chess engine yet, <a href="https://stockfishchess.org/download/" target="_blank">Stockfish</a> is an excellent free option. Download the Windows executable and point CARA to it when adding your first engine.
                </div>
                
                <h5 id="adding-additional-engines">5.1.2 Adding Additional Engines and Advanced Configuration</h5>
                <p>Once you have your first engine set up, you can add additional engines and configure per-engine, per-task settings to optimize performance for different analysis scenarios:</p>
                <ul>
                    <li><strong>Multiple engines:</strong> You can add multiple engines and assign different engines to different tasks. For example, you might use a fast engine for continuous evaluation and a stronger engine for deep game analysis.</li>
                    
                    <li><strong>Task assignment:</strong> Assign engines to specific tasks using <span class="menu-item">Engines → [Engine Name] → Assign to [Task]</span>. You can reassign engines between tasks at any time—only one engine can be assigned to each task at a time.<br>
                    <img src="screenshots/set_engine_task.png" alt="CARA Engine Task Assignment - Menu showing engine assignment options for different analysis tasks" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                    </li>
                    
                    <li><strong>Per-task configuration:</strong> Each engine can have separate settings for each task (evaluation, game analysis, and manual analysis). Configure these settings using <span class="menu-item">Engines → [Engine Name] → Engine Configuration...</span> to configure engine options for each task independently. This allows you to optimize the same engine differently for different analysis types.<br>
                    <img src="screenshots/engine_settings_dialog.png" alt="CARA Engine Configuration Dialog - Dialog for configuring per-engine per-task parameters including thread count, depth limits, time limits, and engine-specific options" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                    <p>The dialog includes "Copy..." buttons for each task that allow you to copy settings from one task to another, making it easy to duplicate configurations. The "Reset" button restores the recommended default settings for the selected task.</p>
                    <div class="tip-box" style="margin-top: 15px;">
                        <strong>Quick Tip:</strong> Per-task engine configuration is an advanced setting. For most users, the default configurations will work fine and no manual configuration is necessary.
                    </div>
                    </li>
                </ul>
            </div>

            <div class="outline-item">
                <h4 id="importing-games">5.2 Importing Games</h4>
                <p>CARA provides several ways to import and open games. This section covers the three main methods.</p>
                
                <h5 id="copy-from-clipboard">5.2.1 Copy from System Clipboard</h5>
                <p>The quickest way to import a single game is to paste PGN text directly from your system clipboard:</p>
                <ol>
                    <li><strong>Copy PGN text:</strong><br>
                    Copy PGN game data from any source (website, text file, another application) to your system clipboard.</li>
                    
                    <li><strong>Paste into CARA:</strong><br>
                    Use <span class="menu-item">Edit → Paste PGN to Clipboard DB</span> (<code>Ctrl+V</code> / <code>⌘+V</code>) to paste into the Clipboard database, or <span class="menu-item">Edit → Paste PGN to active DB</span> (<code>Ctrl+Alt+V</code> / <code>⌘+⌥+V</code>) to paste into the currently active database. The pasted game gets loaded automatically and becomes the active game.</li>
                </ol>
                
                <div class="tip-box">
                    <strong>Quick Tip:</strong> You can paste PGN text containing multiple games at once. All games will be added to the selected database, and the first game will automatically become the active game.
                </div>
                
                <h5 id="open-pgn-files">5.2.2 Open PGN File(s)</h5>
                <p>To import games from one or more PGN files on your computer:</p>
                <ol>
                    <li><strong>Open the file dialog:</strong><br>
                    Use <span class="menu-item">File → Open PGN Database</span> (<code>Ctrl+O</code> / <code>⌘+O</code>) to open the file selection dialog.</li>
                    
                    <li><strong>Select files:</strong><br>
                    Select one or multiple PGN files from your computer. You can select multiple files using several methods: click and drag with your mouse to select a range of files, hold <code>Ctrl</code> on Windows or <code>⌘</code> on macOS while clicking to select individual files, or hold <code>Shift</code> while clicking to select a range of files.</li>
                    
                    <li><strong>Load games:</strong><br>
                    Each selected file opens as a separate tab in the Database Panel. The first game from the first file automatically becomes the active game.</li>
                </ol>
                
                <h5 id="import-from-online">5.2.3 Import from Online Platforms</h5>
                <p>CARA can import games directly from online chess platforms:</p>
                <ol>
                    <li><strong>Open the import dialog:</strong><br>
                    Use <span class="menu-item">File → Import Games from Online...</span> (<code>Ctrl+Shift+I</code> / <code>⌘+Shift+I</code>) to open the import dialog.</li>
                    
                    <li><strong>Select platform and enter username:</strong><br>
                    Choose either <strong>Lichess</strong> or <strong>Chess.com</strong>, then enter the username of the player whose games you want to import.</li>
                    
                    <li><strong>Configure import options (optional):</strong><br>
                    You can optionally filter games by date range, game type (blitz, rapid, classical, etc.), and set a maximum number of games to import.</li>
                    
                    <li><strong>Choose destination:</strong><br>
                    Select whether to import games into the Clipboard database or the currently active database.</li>
                    
                    <li><strong>Start import:</strong><br>
                    Click "Import" to begin. CARA will fetch games from the platform's API and display progress in the status bar. Once complete, the imported games are added to your selected database.</li>
                </ol>
                
                <img src="screenshots/import_from_online.png" alt="CARA Import Games from Online Dialog - Dialog for importing games from Lichess or Chess.com with username, date range, game type, and destination options" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
            </div>

            <div class="outline-item">
                <h4 id="managing-databases">5.3 Managing Databases</h4>
                <p>CARA provides several tools for managing your game databases, including basic file operations and powerful bulk operations for batch processing multiple games at once.</p>
                
                <div class="tip-box">
                    <strong>Quick Tip:</strong> All changes made to a database (including bulk operations, tag modifications, and game edits) are applied in memory only and are not persisted to disk until you explicitly save the database using <span class="menu-item">File → Save PGN Database</span> (<code>Ctrl+S</code> / <code>⌘+S</code>) or <span class="menu-item">File → Save PGN Database as...</span> (<code>Ctrl+Shift+S</code> / <code>⌘+Shift+S</code>). The unsaved changes indicator (orange dot) on database tabs helps you track which databases have unsaved modifications.
                </div>
                
                <h5 id="basic-database-operations">5.3.1 Basic Database Operations</h5>
                <p>For opening, saving, and closing databases, see <a href="#common-database-actions">section 4.4.5</a>.</p>
                
                <h5 id="bulk-replace-tags">5.3.2 Bulk Replace Tags</h5>
                <p>Use <span class="menu-item">File → Bulk Replace Tags...</span> (<code>Ctrl+Shift+R</code> / <code>⌘+Shift+R</code>) to find and replace text in metadata tags across multiple games. This is useful for correcting typos, standardizing player names, or updating event information.</p>
                <img src="screenshots/bulk_replace_tags_dialog.png" alt="CARA Bulk Replace Tags Dialog - Dialog for finding and replacing text in metadata tags across multiple games with tag selection, find/replace fields, and matching options" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                <p>The dialog allows you to:</p>
                <ul>
                    <li>Select a tag to modify (e.g., White, Black, Event, Site)</li>
                    <li>Specify text to find and replace</li>
                    <li>Choose between case-sensitive or case-insensitive matching</li>
                    <li>Use regular expressions for advanced pattern matching</li>
                    <li>Process all games or only selected games in the database table</li>
                </ul>
                <p>The dialog also includes two smart update options:</p>
                <ul>
                    <li><strong>Update Result based on last move evaluation:</strong> Analyzes the final position of each game using a chess engine to determine the game result. This option only updates games with indecisive results (empty, "*", or "?"), preserving games that already have decisive results (1-0, 0-1, 1/2-1/2). It can detect checkmate or stalemate directly, or use engine evaluation to determine the likely result for incomplete games. This is useful if you are for example importing games from a chess computer, which doesn't provide a resign function.</li>
                    <li><strong>Update ECO code with played opening ECO:</strong> Analyzes the opening moves of each game and updates the ECO (Encyclopaedia of Chess Openings) tag based on the opening that was actually played. This uses CARA's built-in opening database to identify the correct ECO code from the game's move sequence.</li>
                </ul>
                
                <h5 id="bulk-add-remove-tags">5.3.3 Bulk Add/Remove Tags</h5>
                <p>Use <span class="menu-item">File → Bulk Add/Remove Tags...</span> (<code>Ctrl+Alt+T</code> / <code>⌘+⌥+T</code>) to add or remove metadata tags across multiple games. This is useful for adding missing information or cleaning up tag sets.</p>
                <p>The dialog allows you to:</p>
                <ul>
                    <li>Add a new tag with a fixed value or copy from another tag</li>
                    <li>Remove existing tags</li>
                    <li>Process all games or only selected games in the database table</li>
                </ul>
                
                <h5 id="bulk-clean-pgn">5.3.4 Bulk Clean PGN</h5>
                <p>Use <span class="menu-item">File → Bulk Clean PGN...</span> (<code>Ctrl+Shift+L</code> / <code>⌘+Shift+L</code>) to remove unwanted elements from PGN notation across multiple games.</p>
                <p>The dialog allows you to remove:</p>
                <ul>
                    <li>Comments</li>
                    <li>Variations</li>
                    <li>Non-standard tags</li>
                    <li>Annotations (e.g., !, ?, !?, ?!)</li>
                    <li>Results</li>
                </ul>
                <p>You can select any combination of these options and process all games or only selected games in the database table.</p>
                
                <h5 id="deduplicate-games">5.3.5 Deduplicate Games</h5>
                <p>Use <span class="menu-item">File → Deduplicate Games in Active Database...</span> (<code>Ctrl+Shift+U</code> / <code>⌘+Shift+U</code>) to identify and remove duplicate games from the active database.</p>
                <p>The deduplication dialog allows you to choose how games are matched:</p>
                <ul>
                    <li><strong>Exact PGN:</strong> Matches games with identical PGN notation (including headers, moves, comments, and variations)</li>
                    <li><strong>Moves Only:</strong> Matches games with identical move sequences, ignoring headers, comments, and variations</li>
                    <li><strong>Normalized PGN:</strong> Matches games with identical PGN after removing comments and variations</li>
                    <li><strong>Header Based:</strong> Matches games based on selected header fields (e.g., White, Black, Date, Result)</li>
                </ul>
                <p>When duplicates are found, the active game (if it's a duplicate) is preserved, and other duplicates are removed. Progress is displayed in the status bar during the operation.</p>
            </div>

            <div class="outline-item">
                <h4 id="searching-games">5.4 Searching Games</h4>
                <p>CARA provides powerful search functionality to find games across your databases based on multiple criteria. You can search within a single database or across all open databases simultaneously, and combine criteria using logical operators (AND/OR) and grouping.</p>
                
                <img src="screenshots/search_games_dialog.png" alt="CARA Search Games Dialog - Dialog for searching games with search scope options, criteria rows with fields/operators/values, logical operators, and grouping controls" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <h5 id="search-scope">5.4.1 Search Scope</h5>
                <p>When you open the search dialog using <span class="menu-item">File → Search Games...</span> (<code>Ctrl+F</code> / <code>⌘+F</code>), you can choose where to search:</p>
                <ul>
                    <li><strong>Active database:</strong> Search only within the currently active database tab.</li>
                    <li><strong>All open databases:</strong> Search across all open database tabs simultaneously. Results from different databases are combined and displayed in a dedicated "Search Results" tab with an additional "Source DB" column indicating which database each game came from.</li>
                </ul>
                
                <h5 id="search-criteria">5.4.2 Search Criteria</h5>
                <p>Each search criterion consists of three parts:</p>
                <ul>
                    <li><strong>Field:</strong> The game property to search (e.g., White, Black, WhiteElo, BlackElo, Result, Date, Event, Site, ECO, Analyzed, Annotated, or Custom PGN Tag).</li>
                    <li><strong>Operator:</strong> How to compare the field value. Available operators depend on the field type:
                        <ul>
                            <li><strong>Text fields</strong> (White, Black, Event, Site, ECO): contains, equals, not equals, starts with, ends with, is empty, is not empty</li>
                            <li><strong>Numeric fields</strong> (WhiteElo, BlackElo): equals, not equals, greater than, less than, greater than or equal, less than or equal</li>
                            <li><strong>Date field:</strong> equals, not equals, before, after, contains (for partial date matching, e.g., "2025" matches "2025.11.09")</li>
                            <li><strong>Boolean fields</strong> (Analyzed, Annotated): is, is not</li>
                        </ul>
                    </li>
                    <li><strong>Value:</strong> The value to search for (not required for "is empty", "is not empty", or boolean fields).</li>
                </ul>
                <p>For "Custom PGN Tag", you must also specify the tag name in an additional field that appears when this option is selected.</p>
                
                <h5 id="logical-operators">5.4.3 Logical Operators and Grouping</h5>
                <p>Search criteria are combined using logical operators (AND/OR) to create complex queries. By default, criteria are combined with AND logic, meaning all criteria must match for a game to be included in the results.</p>
                <p>Each criterion row (except the first) has an AND/OR selector that determines how it relates to the previous criterion:</p>
                <ul>
                    <li><strong>AND:</strong> Both this criterion and the previous criterion must match (default).</li>
                    <li><strong>OR:</strong> Either this criterion or the previous criterion (or both) must match.</li>
                </ul>
                
                <h5 id="grouping-criteria">5.4.4 Grouping Criteria</h5>
                <p>For more complex searches, you can group criteria together using the "Start Group" and "End Group" buttons. Groups allow you to create logical expressions like "(A AND B) OR (C AND D)".</p>
                <p>To create a group:</p>
                <ol>
                    <li><strong>Add criteria:</strong> Add the criteria you want to include in the group using "Add Criterion".</li>
                    <li><strong>Start the group:</strong> Click "Start Group" to mark the beginning of a group. This adds a new criterion row that is visually indented and marked as the group start.</li>
                    <li><strong>Add group criteria:</strong> Add additional criteria within the group. These will be visually indented to show they belong to the group.</li>
                    <li><strong>End the group:</strong> Click "End Group" to mark the end of the group. The last criterion before the end marker becomes the group end.</li>
                </ol>
                <p>Groups can be nested to create complex logical expressions. Nested groups are visually indicated by increased indentation levels. The search system evaluates groups from innermost to outermost, allowing you to create sophisticated queries like "((A OR B) AND C) OR (D AND E)".</p>
                <p>When a group is created, the AND/OR operator on the group start row determines how the entire group relates to criteria before it. Criteria within a group are combined according to their individual AND/OR operators.</p>
                
                <h5 id="performing-search">5.4.5 Performing a Search</h5>
                <p>Once you've set up your search criteria:</p>
                <ol>
                    <li><strong>Review your criteria:</strong> Ensure all criteria have valid values and logical operators set correctly.</li>
                    <li><strong>Click "Search":</strong> CARA will search the selected database(s) and display matching games in a "Search Results" tab in the Database Panel.</li>
                    <li><strong>Review results:</strong> The search results tab shows all matching games. If you searched across multiple databases, each result includes a "Source DB" column indicating which database it came from.</li>
                </ol>
                <p>The search dialog remembers your last search query during the current session, so you can easily modify and re-run searches. Double-click any game in the search results to open it for review.</p>
            </div>

            <div class="outline-item">
                <h4 id="analyzing-game">5.5 Analyzing a Game</h4>
                <p>CARA's game analysis feature uses a chess engine to evaluate every move in a game, providing detailed insights into move quality, evaluation changes, and alternative moves. This section explains how to analyze a single game.</p>
                
                <h5 id="starting-analysis">5.5.1 Starting Game Analysis</h5>
                <p>To analyze the currently active game:</p>
                <ol>
                    <li><strong>Ensure you have a game loaded:</strong><br>
                    Open a game from your database or paste a PGN game. The game must be active (displayed in the main panel).</li>
                    
                    <li><strong>Verify engine configuration:</strong><br>
                    Make sure you have at least one UCI-compatible chess engine configured and assigned to the game analysis task. If you haven't configured an engine yet, see <a href="#adding-first-engine">section 5.1.1</a> for step-by-step instructions. For information about assigning engines to specific tasks, see <a href="#adding-additional-engines">section 5.1.2</a>.</li>
                    
                    <li><strong>Start the analysis:</strong><br>
                    Use <span class="menu-item">Game Analysis → Start Game Analysis</span> (<code>Ctrl+G</code> / <code>⌘+G</code>) to begin analyzing the game. CARA will automatically switch to the Moves List tab if configured to do so (see <a href="#analysis-settings">section 5.5.3</a>).</li>
                </ol>
                <p>During analysis, CARA processes each move sequentially, evaluating the position before and after each move, calculating Centipawn Loss (CPL), and classifying move quality. Progress is displayed in the status bar, showing the current move being analyzed, the engine name, search depth, and evaluation.</p>
                
                <h5 id="analysis-results">5.5.2 Understanding Analysis Results</h5>
                <p>As moves are analyzed, the Moves List shows detailed information for each move:</p>
                <ul>
                    <li><strong>Evaluation:</strong> The engine's evaluation of the position after each move (in centipawns, from White's perspective).</li>
                    <li><strong>Centipawn Loss (CPL):</strong> How much worse the played move is compared to the best move, measured in centipawns (where 100 centipawns = 1 pawn). Lower values are better. A CPL of 0 means the best move was played.</li>
                    <li><strong>Move Classification:</strong> Each move is classified as one of:
                        <ul>
                            <li><strong>Book Move:</strong> A move found in the opening book database</li>
                            <li><strong>Brilliant:</strong> An exceptional move involving material sacrifice that leads to a significant advantage</li>
                            <li><strong>Best Move:</strong> The engine's recommended move was played</li>
                            <li><strong>Good Move:</strong> A solid move with low CPL</li>
                            <li><strong>Inaccuracy:</strong> A suboptimal move that loses some evaluation but doesn't significantly change the game</li>
                            <li><strong>Mistake:</strong> A poor move that significantly worsens the position</li>
                            <li><strong>Miss:</strong> A missed opportunity (e.g., missing a winning move or allowing a draw)</li>
                            <li><strong>Blunder:</strong> A catastrophic move that dramatically changes the evaluation</li>
                        </ul>
                    </li>
                    <li><strong>Best Alternative Move:</strong> The engine's recommended move for each position, displayed in the Moves List. The best alternative move arrow on the chessboard highlights this move visually.</li>
                    <li><strong>Engine Depth:</strong> The search depth reached by the engine for each position.</li>
                </ul>
                
                <div class="tip-box">
                    <strong>Quick Tip:</strong> The thresholds used for move classification (e.g., what CPL value constitutes a "Mistake" vs. "Blunder") can be customized in the Classification Settings dialog. Access it via <span class="menu-item">Game Analysis → Configure Classification Settings...</span> (<code>Ctrl+Shift+K</code> / <code>⌘+Shift+K</code>).
                </div>
                
                <p>You can review this information in the Moves List, or switch to the <span class="menu-item">Game Summary</span> tab (<code>F4</code>) for a condensed overview of key game moments, statistics, and highlights.</p>
                
                <h5 id="analysis-settings">5.5.3 Analysis Settings</h5>
                <p>CARA provides several settings to customize the analysis workflow:</p>
                <ul>
                    <li><strong>Switch to Moves List at Start of Analysis:</strong> Automatically switches to the Moves List tab when analysis begins (enabled by default).</li>
                    <li><strong>Return to PLY 0 after analysis completes:</strong> Automatically navigates to the starting position (PLY 0) when analysis completes.</li>
                    <li><strong>Switch to Game Summary after Analysis:</strong> Automatically switches to the Game Summary tab when analysis completes.</li>
                    <li><strong>Store Analysis Results in PGN Tag:</strong> Saves analysis data (evaluations, CPL, classifications) in a PGN metadata tag for persistence across sessions.</li>
                </ul>
                <p>These settings can be toggled in the <span class="menu-item">Game Analysis</span> menu and are saved in your user settings.</p>
                
                <h5 id="cancelling-analysis">5.5.4 Cancelling Analysis</h5>
                <p>You can cancel an ongoing analysis at any time using <span class="menu-item">Game Analysis → Cancel Game Analysis</span> or press <code>Escape</code>. When cancelled, analysis stops at the current move, and all moves analyzed up to that point retain their analysis data.</p>
                
                <h5 id="bulk-analysis">5.5.5 Bulk Analysis</h5>
                <p>To analyze multiple games at once, use <span class="menu-item">Game Analysis → Bulk Analyze Database...</span>.</p>
                <img src="screenshots/bulk_analyze_dialog.png" alt="CARA Bulk Analysis Dialog - Dialog for analyzing multiple games with game selection options, analysis settings, and progress tracking" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                <p>CARA automatically optimizes available CPU cores to analyze multiple games in parallel, maximizing analysis speed. Progress and estimated time remaining are displayed in the status bar, and you can cancel and resume bulk analysis at any time.</p>
            </div>

            <div class="outline-item">
                <h4 id="manual-analysis-task">5.6 Manual Analysis</h4>
                <p>Manual Analysis provides continuous engine analysis of any position, allowing you to explore candidate moves and understand the engine's recommendations in real-time. Unlike game analysis which processes all moves in a game, manual analysis focuses on the current position and updates continuously as you navigate through the game.</p>
                
                <h5 id="starting-manual-analysis">5.6.1 Starting Manual Analysis</h5>
                <p>To start analyzing the current position:</p>
                <ol>
                    <li><strong>Navigate to the position:</strong><br>
                    Use the arrow keys or click moves in the Moves List to navigate to the position you want to analyze.</li>
                    
                    <li><strong>Switch to Manual Analysis tab:</strong><br>
                    Navigate to the <span class="menu-item">Manual Analysis</span> tab in the Detail Panel (<code>F3</code>).</li>
                    
                    <li><strong>Start analysis:</strong><br>
                    Use <span class="menu-item">Manual Analysis → Start Manual Analysis</span> (<code>Alt+M</code> / <code>⌥+M</code>) to begin continuous analysis. The engine will analyze the current position and display principal variation lines with evaluations, depths, and move sequences.</li>
                </ol>
                <p>Analysis continues automatically as you navigate to different positions in the game. To stop analysis, use the same menu item or keyboard shortcut again.</p>
                
                <h5 id="multipv-analysis">5.6.2 MultiPV Analysis</h5>
                <p>Manual Analysis supports MultiPV (Multiple Principal Variations), allowing you to see multiple candidate moves simultaneously. By default, analysis shows one principal variation line (PV1). You can add additional lines to compare different candidate moves:</p>
                <img src="screenshots/manual_analysis.png" alt="CARA Manual Analysis View - MultiPV analysis display showing principal variation lines with evaluations, depths, and move sequences" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                <ul>
                    <li><strong>Add PV Line:</strong> Use <span class="menu-item">Manual Analysis → Add PV Line</span> (<code>Alt+N</code> / <code>⌥+N</code>) to add another principal variation line. You can add as many lines as needed.</li>
                    <li><strong>Remove PV Line:</strong> Use <span class="menu-item">Manual Analysis → Remove PV Line</span> (<code>Alt+R</code> / <code>⌥+R</code>) to remove the last added line (requires at least two lines).</li>
                </ul>
                <p>Each PV line displays the engine's recommended move sequence, evaluation, search depth, and performance metrics. The first three PV lines (PV1, PV2, PV3) have color-coded indicators that match the colors of the corresponding arrows on the chessboard when enabled, helping you visually connect the analysis lines to the board arrows.</p>
                
                <h5 id="exploring-variations">5.6.3 Exploring Variations</h5>
                <p>You can explore variations by hovering over moves in the PV lines:</p>
                <ul>
                    <li><strong>Miniature Board Preview:</strong> Enable <span class="menu-item">Manual Analysis → Enable miniature preview</span> to display a small board preview when hovering over moves in the PV lines. This shows the resulting position if that move were played.</li>
                    <li><strong>PV Arrows on Board:</strong> The PV1, PV2, and PV3 arrows on the chessboard (toggle with <code>Alt+B</code> / <code>⌥+B</code>, <code>Alt+2</code> / <code>⌥+2</code>, <code>Alt+3</code> / <code>⌥+3</code>) show the recommended moves from each analysis line, making it easy to see candidate moves visually.</li>
                </ul>
                
                <h5 id="positional-plan-exploration">5.6.4 Positional Plan Exploration</h5>
                <p>Positional Plan Exploration visualizes how pieces move through the engine's recommended sequence, helping you understand strategic plans and piece coordination. Instead of just seeing individual moves, you can see complete piece trajectories—where pieces start, where they move, and the path they take through multiple moves.</p>
                <p>To explore positional plans:</p>
                <ol>
                    <li><strong>Enable plan exploration:</strong><br>
                    Use <span class="menu-item">Manual Analysis → Explore PV1 Positional Plans</span>, <span class="menu-item">Explore PV2 Positional Plans</span>, or <span class="menu-item">Explore PV3 Positional Plans</span> to enable plan exploration for a specific PV line. Only one plan can be active at a time.</li>
                    
                    <li><strong>Configure exploration settings:</strong><br>
                    Use <span class="menu-item">Manual Analysis → Max number of pieces to explore</span> to set how many pieces to track (1-3 pieces). The system automatically selects the pieces that move most frequently in the PV line. Use <span class="menu-item">Manual Analysis → Max Exploration depth</span> to set how many moves ahead to visualize (2-4 moves).</li>
                </ol>
                <p>When enabled, the chessboard displays colored lines showing the trajectory of each tracked piece through the engine's recommended sequence. Each piece is assigned a distinct color that matches its indicator in the PV display, making it easy to follow piece movement patterns and understand positional themes.</p>
                <img src="screenshots/positional_plans_piece_trajectories.png" alt="CARA Positional Plan Exploration - Chessboard showing colored piece trajectories visualizing engine's recommended piece movement patterns" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
            </div>

            <div class="outline-item">
                <h4 id="viewing-player-statistics">5.7 Viewing Player Statistics</h4>
                <p>The Player Stats tab provides aggregated statistics across multiple games for any selected player, helping you identify patterns, strengths, and weaknesses in a player's performance. Access this tab using <span class="menu-item">View → Player Stats</span> or press <code>F5</code>.</p>
                
                <img src="screenshots/player_stats.png" alt="CARA Player Stats View - Aggregated statistics showing overall performance, phase breakdown, opening analysis, and error patterns for a selected player" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <h5 id="selecting-player">5.7.1 Selecting a Player</h5>
                <p>To view statistics for a player:</p>
                <ol>
                    <li><strong>Choose data source:</strong><br>
                    Select whether to analyze players from the active database or all open databases using the radio buttons at the top of the Player Stats tab.</li>
                    
                    <li><strong>Select a player:</strong><br>
                    Use the player dropdown to select a player. The dropdown shows each player's name along with the number of analyzed games and total games (e.g., "Player Name (15 analyzed, 20 total)").</li>
                </ol>
                
                <div class="tip-box">
                    <strong>Quick Tip:</strong> The selected data source (active database or all open databases) must contain at least 2 analyzed games for a player for that player to appear in the dropdown. This ensures that statistics are meaningful and based on sufficient data.
                </div>
                
                <h5 id="understanding-statistics">5.7.2 Understanding the Statistics</h5>
                <p>Once a player is selected, the view displays comprehensive aggregated statistics:</p>
                <ul>
                    <li><strong>Overall Performance:</strong> Aggregated metrics including accuracy, average Centipawn Loss (CPL), estimated ELO, win rate, and move classification distributions (Best Move, Good Move, Inaccuracy, Mistake, Blunder, etc.).</li>
                    
                    <li><strong>Phase Breakdown:</strong> Performance broken down by game phase (Opening, Middlegame, Endgame), showing how the player performs in different stages of play. This helps identify strengths and weaknesses in specific phases.</li>
                    
                    <li><strong>Opening Analysis:</strong> Tracks opening usage and accuracy, identifying which openings the player plays most frequently, best-performing openings, and worst-performing openings with average CPL for each.</li>
                    
                    <li><strong>Error Pattern Detection:</strong> Automatically detects error patterns such as:
                        <ul>
                            <li>Phase-specific blunder tendencies (e.g., frequent blunders in the endgame)</li>
                            <li>Tactical misses</li>
                            <li>Opening-specific errors</li>
                            <li>Consistently high Centipawn Loss</li>
                            <li>Missed opportunities</li>
                            <li>Conversion issues in winning positions</li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div class="outline-item">
                <h4 id="adding-annotations">5.8 Adding Annotations</h4>
                <p>CARA annotations allow you to add custom markings to the chessboard, including text, arrows, circles, and square highlighting. Unlike regular PGN annotations, CARA annotations are not added to PGN notation as special encoded comments but are kept separate. Text can be freely positioned, sized, and rotated. Access the Annotations tab using <span class="menu-item">View → Annotations</span> or press <code>F6</code>.</p>
                
                <img src="screenshots/annotations.png" alt="CARA Annotations View - Tools for creating custom annotations on the chessboard including text, arrows, circles, and square highlighting" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <h5 id="annotation-tools">5.8.1 Annotation Tools</h5>
                <p>The Annotations tab provides several tools for creating annotations:</p>
                <ul>
                    <li><strong>Text:</strong> Add free-form text annotations that can be positioned anywhere on the board. Text can be adjusted in size, rotated, and positioned relative to any square.</li>
                    <li><strong>Arrow:</strong> Draw arrows between squares to indicate move sequences or piece movements. Click and drag from one square to another to create an arrow.</li>
                    <li><strong>Circle:</strong> Add circular highlights around squares to emphasize specific squares.</li>
                    <li><strong>Square:</strong> Add square highlights to mark specific squares.</li>
                    <li><strong>Text:</strong> Add free-form text annotations that can be positioned anywhere on the board. Text can be adjusted in size, rotated, and positioned relative to any square.</li>
                </ul>
                <p>All annotation types support customizable colors, size adjustments (0.5x to 2.0x), and optional shadow effects for better visibility. Select a tool from the toolbar, choose a color, and click on the chessboard to add annotations.</p>
                
                <h5 id="annotation-preferences">5.8.2 Annotation Preferences</h5>
                <p>You can customize the annotation color palette and text font settings using <span class="menu-item">Annotations → Setup Preferences...</span>.</p>
                <img src="screenshots/annotation_preferences_dialog.png" alt="CARA Annotation Preferences Dialog - Dialog for configuring annotation color palette and text font settings" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                <p>The dialog provides the following options:</p>
                <ul>
                    <li><strong>Color Palette:</strong> Customize the color palette used for annotations. Click any color swatch to open a color picker and select a new color.</li>
                    <li><strong>Text Annotation Font:</strong> Configure the font family and font size used for text annotations.</li>
                    <li><strong>Reset to Defaults:</strong> Click the "Reset to Defaults" button to restore the color palette and font settings to their default values.</li>
                </ul>
                <p>Changes are saved to your user settings when you click "Save" and will persist across sessions.</p>
                
                <h5 id="managing-annotations">5.8.3 Managing Annotations</h5>
                <p>Annotations are automatically attached to the current move (position) in the game. As you navigate through the game, annotations for each position are shown or hidden automatically.</p>
                <p>You can manage annotations using the following options:</p>
                <ul>
                    <li><strong>Save Annotations:</strong> Use <span class="menu-item">Annotations → Save Annotations to current game</span> (<code>Ctrl+Alt+S</code>) to save all annotations to the active game. Annotations are compressed and stored in a PGN metadata tag, keeping the PGN move notation clean.</li>
                    <li><strong>Clear Move Annotations:</strong> Use <span class="menu-item">Annotations → Clear all Annotations for current move</span> (<code>Ctrl+Alt+D</code>) to remove all annotations for the current position.</li>
                    <li><strong>Clear All Annotations:</strong> Use <span class="menu-item">Annotations → Clear all Annotations for current game</span> (<code>Ctrl+Shift+D</code> / <code>⌘+Shift+D</code>) to remove all annotations from the entire game.</li>
                    <li><strong>Toggle Visibility:</strong> Use <span class="menu-item">Board → Show Annotations</span> (<code>Alt+L</code> / <code>⌥+L</code>) to show or hide the annotation layer on the chessboard.</li>
                </ul>
                
                <div class="tip-box">
                    <strong>Quick Tip:</strong> You must first save annotations to the game using "Save Annotations to current game" to serialize them into the PGN metadata tag. This marks the game as modified. When you save the database, the annotations are then persisted to disk.
                </div>
            </div>

            <div class="outline-item">
                <h4 id="copying-moving-games">5.9 Copying and Moving Games</h4>
                <p>CARA provides practical copy, cut, and paste functionality that allows you to move games between databases, share games with other applications, and work with board positions. This section covers all clipboard operations for games and positions.</p>
                
                <h5 id="copying-selected-games">5.9.1 Copying Selected Games</h5>
                <p>To copy one or more games from a database to the clipboard:</p>
                <ol>
                    <li><strong>Select games:</strong><br>
                    In the Database Panel, select one or more games in the game table. You can select multiple games by holding <code>Ctrl</code> (individual selection) or <code>Shift</code> (range selection) while clicking.</li>
                    
                    <li><strong>Copy to clipboard:</strong><br>
                    Use <span class="menu-item">Edit → Copy selected Games</span> (<code>Ctrl+Shift+C</code> / <code>⌘+Shift+C</code>) to copy the selected games to your system clipboard as PGN text. The games remain in the source database.</li>
                </ol>
                <p>The copied games are stored as standard PGN text, separated by double newlines. You can paste them into another database in CARA, or into any other application that accepts PGN text.</p>
                
                <h5 id="cutting-selected-games">5.9.2 Cutting Selected Games</h5>
                <p>To move games from one database to another (or remove them from a database):</p>
                <ol>
                    <li><strong>Select games:</strong><br>
                    In the Database Panel, select one or more games in the game table.</li>
                    
                    <li><strong>Cut to clipboard:</strong><br>
                    Use <span class="menu-item">Edit → Cut selected Games</span> (<code>Ctrl+Shift+X</code>) to copy the selected games to your system clipboard and remove them from the source database. If the active game is among the cut games, it will be cleared.</li>
                </ol>
                <p>The cut games are stored as PGN text in your clipboard, ready to be pasted into another database. The source database is marked as having unsaved changes.</p>
                
                <h5 id="pasting-games">5.9.3 Pasting Games into a Database</h5>
                <p>To paste games from the clipboard into a database:</p>
                <ol>
                    <li><strong>Ensure PGN is in clipboard:</strong><br>
                    Make sure your system clipboard contains PGN text (either from copying/cutting games in CARA, or from another application).</li>
                    
                    <li><strong>Select destination database:</strong><br>
                    Activate the database tab where you want to paste the games, or use the Clipboard database.</li>
                    
                    <li><strong>Paste games:</strong><br>
                    Use <span class="menu-item">Edit → Paste PGN to Clipboard DB</span> (<code>Ctrl+V</code> / <code>⌘+V</code>) to paste into the Clipboard database, or <span class="menu-item">Edit → Paste PGN to active DB</span> (<code>Ctrl+Alt+V</code> / <code>⌘+⌥+V</code>) to paste into the currently active database.</li>
                </ol>
                <p>All games in the clipboard PGN text are added to the selected database. If the clipboard contains multiple games, all are added, and the first game automatically becomes the active game. The destination database is marked as having unsaved changes.</p>
                
                <div class="tip-box">
                    <strong>Quick Tip:</strong> You can use copy/cut and paste to move games between databases. For example, copy games from one database tab, switch to another database tab, and paste them there. This is useful for organizing your game collections or creating filtered subsets of games.
                </div>
                
                <h5 id="copying-active-game-pgn">5.9.4 Copying the Active Game PGN</h5>
                <p>To copy the currently active game's PGN to the clipboard:</p>
                <ol>
                    <li><strong>Ensure a game is active:</strong><br>
                    Make sure you have a game open and active (displayed in the main panel).</li>
                    
                    <li><strong>Copy PGN:</strong><br>
                    Use <span class="menu-item">Edit → Copy PGN</span> (<code>Ctrl+P</code> / <code>⌘+P</code>) to copy the active game's complete PGN text to your system clipboard.</li>
                </ol>
                <p>This copies the full PGN notation of the active game, including all metadata tags, moves, comments, and variations. You can then paste it into another application or share it with others.</p>
                
                <h5 id="copying-pasting-positions">5.9.5 Copying and Pasting Board Positions</h5>
                <p>CARA also supports copying and pasting board positions using FEN (Forsyth-Edwards Notation):</p>
                <ul>
                    <li><strong>Copy FEN:</strong> Use <span class="menu-item">Edit → Copy FEN</span> (<code>Shift+F</code>) to copy the current board position as FEN notation to your system clipboard. This is useful for sharing specific positions or setting up positions in other chess applications.</li>
                    
                    <li><strong>Paste FEN:</strong> Use <span class="menu-item">Edit → Paste FEN to Board</span> (<code>Ctrl+F</code> / <code>⌘+F</code>) to paste a FEN position from your clipboard and update the chessboard to that position. When a FEN is pasted, the active game is cleared (set to None) since the board position is no longer part of a game sequence.</li>
                </ul>
            </div>
        </section>

        <!-- 6. COMPLETE REFERENCE -->
        <section id="reference">
            <h2>6. Complete Reference</h2>

            <!-- File Menu -->
            <div class="outline-item">
                <h4 id="file-menu">6.1 File Menu</h4>
                
                <h5>6.1.1 Clear Clipboard Database</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+C</code> / <code>⌘+Shift+C</code></p>
                <p>Removes all games from the Clipboard database.</p>
                
                <h5>6.1.2 Open PGN Database</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+O</code> / <code>⌘+O</code></p>
                <p>Opens one or more PGN files from your computer. Each file appears as a separate tab in the Database Panel.<br>See <a href="#open-pgn-files">section 5.2.2</a> for detailed instructions.</p>
                
                <h5>6.1.3 Close PGN Database</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+W</code> / <code>⌘+W</code></p>
                <p>Closes the currently active database tab. Any unsaved changes will be lost if you haven't saved the database first.<br>See <a href="#common-database-actions">section 4.4.5</a> for more information.</p>
                
                <h5>6.1.4 Save PGN Database</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+S</code> / <code>⌘+S</code></p>
                <p>Saves the active database to disk, overwriting the existing file.<br>See <a href="#common-database-actions">section 4.4.5</a> for more information.</p>
                
                <h5>6.1.5 Save PGN Database as...</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+S</code> / <code>⌘+Shift+S</code></p>
                <p>Saves the active database to a new file location. This allows you to create a copy of the database without overwriting the original.<br>See <a href="#common-database-actions">section 4.4.5</a> for more information.</p>
                
                <h5>6.1.6 Import Games from Online...</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+I</code> / <code>⌘+Shift+I</code></p>
                <p>Opens a dialog to import games from Lichess or Chess.com.<br>See <a href="#import-from-online">section 5.2.3</a> for detailed instructions.</p>
                
                <h5>6.1.7 Bulk Replace Tags...</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+R</code> / <code>⌘+Shift+R</code></p>
                <p>Opens a dialog to find and replace text in metadata tags across multiple games.<br>See <a href="#bulk-replace-tags">section 5.3.2</a> for detailed instructions.</p>
                
                <h5>6.1.8 Bulk Add/Remove Tags...</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Alt+T</code> / <code>⌘+⌥+T</code></p>
                <p>Opens a dialog to add or remove metadata tags across multiple games.<br>See <a href="#bulk-add-remove-tags">section 5.3.3</a> for detailed instructions.</p>
                
                <h5>6.1.9 Bulk Clean PGN...</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+L</code> / <code>⌘+Shift+L</code></p>
                <p>Opens a dialog to remove unwanted elements (comments, variations, annotations, etc.) from PGN notation across multiple games.<br>See <a href="#bulk-clean-pgn">section 5.3.4</a> for detailed instructions.</p>
                
                <h5>6.1.10 Deduplicate Games in Active Database...</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+U</code> / <code>⌘+Shift+U</code></p>
                <p>Opens a dialog to identify and remove duplicate games from the active database.<br>See <a href="#deduplicate-games">section 5.3.5</a> for detailed instructions.</p>
                
                <h5>6.1.11 Search Games...</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+F</code> / <code>⌘+Shift+F</code></p>
                <p>Opens a dialog to search for games across databases using multiple criteria and logical operators.<br>See <a href="#searching-games">section 5.4</a> for detailed instructions.</p>
                
                <h5>6.1.12 Close Search Results</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+W</code> / <code>⌘+Shift+W</code></p>
                <p>Closes the Search Results tab in the Database Panel. This menu item is only enabled when a search results tab is open.</p>
                
                <h5>6.1.13 Close Application</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Q</code> / <code>⌘+Q</code></p>
                <p>Closes the CARA application. Any unsaved changes in open databases will be lost if you haven't saved them first.</p>
            </div>

            <!-- Edit Menu -->
            <div class="outline-item">
                <h4 id="edit-menu">6.2 Edit Menu</h4>
                
                <h5>6.2.1 Copy FEN</h5>
                <p><strong>Shortcut:</strong> <code>Shift+F</code></p>
                <p>Copies the current board position as FEN (Forsyth-Edwards Notation) to your system clipboard.<br>See <a href="#copying-pasting-positions">section 5.9.5</a> for more information.</p>
                
                <h5>6.2.2 Copy PGN</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+P</code> / <code>⌘+P</code></p>
                <p>Copies the currently active game's complete PGN text to your system clipboard.<br>See <a href="#copying-active-game-pgn">section 5.9.4</a> for more information.</p>
                
                <h5>6.2.3 Copy selected Games</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+C</code> / <code>⌘+Shift+C</code></p>
                <p>Copies the selected games from the active database to your system clipboard as PGN text. The games remain in the source database.<br>See <a href="#copying-selected-games">section 5.9.1</a> for more information.</p>
                
                <h5>6.2.4 Cut selected Games</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+X</code></p>
                <p>Copies the selected games to your system clipboard and removes them from the source database.<br>See <a href="#cutting-selected-games">section 5.9.2</a> for more information.</p>
                
                <h5>6.2.5 Paste FEN to Board</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+F</code> / <code>⌘+F</code></p>
                <p>Pastes a FEN position from your clipboard and updates the chessboard to that position. The active game is cleared when a FEN is pasted.<br>See <a href="#copying-pasting-positions">section 5.9.5</a> for more information.</p>
                
                <h5>6.2.6 Paste PGN to Clipboard DB</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+V</code> / <code>⌘+V</code></p>
                <p>Pastes PGN text from your system clipboard into the Clipboard database. All games in the clipboard are added, and the first game becomes active.<br>See <a href="#copy-from-clipboard">section 5.2.1</a> and <a href="#pasting-games">section 5.9.3</a> for more information.</p>
                
                <h5>6.2.7 Paste PGN to active DB</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Alt+V</code> / <code>⌘+⌥+V</code></p>
                <p>Pastes PGN text from your system clipboard into the currently active database. All games in the clipboard are added, and the first game becomes active.<br>See <a href="#copy-from-clipboard">section 5.2.1</a> and <a href="#pasting-games">section 5.9.3</a> for more information.</p>
            </div>

            <!-- Board Menu -->
            <div class="outline-item">
                <h4 id="board-menu">6.3 Board Menu</h4>
                
                <h5>6.3.1 Rotate Board</h5>
                <p><strong>Shortcut:</strong> <code>X</code></p>
                <p>Toggles the board orientation, rotating it 180 degrees. This is useful for viewing positions from the opposite side's perspective.</p>
                
                <h5>6.3.2 Show Game Info</h5>
                <p><strong>Shortcut:</strong> <code>Alt+I</code> / <code>⌥+I</code></p>
                <p>Toggles the display of game information (players, result, date, etc.) above the chessboard.</p>
                
                <h5>6.3.3 Show Coordinates</h5>
                <p><strong>Shortcut:</strong> <code>Alt+C</code> / <code>⌥+C</code></p>
                <p>Toggles the display of coordinate labels (a-h, 1-8) around the chessboard edges.</p>
                
                <h5>6.3.4 Show Turn Indicator</h5>
                <p><strong>Shortcut:</strong> <code>Alt+T</code> / <code>⌥+T</code></p>
                <p>Toggles the display of the turn indicator showing which side is to move.<br>See <a href="#turn-indicator">section 4.3.5</a> for more information.</p>
                
                <h5>6.3.5 Show Material</h5>
                <p><strong>Shortcut:</strong> <code>Alt+U</code> / <code>⌥+U</code></p>
                <p>Toggles the display of the material widget showing captured pieces and material difference.<br>See <a href="#material-widget">section 4.3.4</a> for more information.</p>
                
                <h5>6.3.6 Show Evaluation Bar</h5>
                <p><strong>Shortcut:</strong> <code>Alt+E</code> / <code>⌥+E</code></p>
                <p>Toggles the display of the evaluation bar showing the engine's assessment of the current position.<br>See <a href="#evaluation-bar">section 4.3.3</a> for more information.</p>
                
                <h5>6.3.7 Show Positional Heat-map</h5>
                <p><strong>Shortcut:</strong> <code>Alt+H</code> / <code>⌥+H</code></p>
                <p>Toggles the display of the positional heatmap overlay showing positional factors through color-coded gradients.<br>See <a href="#positional-heatmap">section 4.3.6</a> for detailed information.</p>
                
                <h5>6.3.8 Show Played Move</h5>
                <p><strong>Shortcut:</strong> <code>Alt+P</code> / <code>⌥+P</code></p>
                <p>Toggles the display of an arrow on the chessboard indicating the last move played in the game.</p>
                
                <h5>6.3.9 Show Best Next Move</h5>
                <p><strong>Shortcut:</strong> <code>Alt+B</code> / <code>⌥+B</code></p>
                <p>Toggles the display of an arrow showing the engine's best recommended move (PV1) from manual analysis.</p>
                
                <h5>6.3.10 Show Next Best Move (PV2)</h5>
                <p><strong>Shortcut:</strong> <code>Alt+2</code> / <code>⌥+2</code></p>
                <p>Toggles the display of an arrow showing the engine's second-best recommended move (PV2) from manual analysis.</p>
                
                <h5>6.3.11 Show Next Best Move (PV3)</h5>
                <p><strong>Shortcut:</strong> <code>Alt+3</code> / <code>⌥+3</code></p>
                <p>Toggles the display of an arrow showing the engine's third-best recommended move (PV3) from manual analysis.</p>
                
                <h5>6.3.12 Show Best Alternative Move</h5>
                <p><strong>Shortcut:</strong> <code>Alt+A</code> / <code>⌥+A</code></p>
                <p>Toggles the display of an arrow showing the best alternative move found during game analysis (the move that should have been played instead of the actual move).</p>
                
                <h5>6.3.13 Show Annotations Layer</h5>
                <p><strong>Shortcut:</strong> <code>Alt+L</code> / <code>⌥+L</code></p>
                <p>Toggles the visibility of the annotations layer on the chessboard, showing or hiding all custom annotations (text, arrows, circles, squares).<br>See <a href="#adding-annotations">section 5.8</a> for more information.</p>
                
                <h5>6.3.14 Path trajectory style</h5>
                <p>Selects the visual style for piece trajectory lines displayed during positional plan exploration:</p>
                <ul>
                    <li><strong>Straight:</strong> Trajectory lines are drawn as straight segments between squares.</li>
                    <li><strong>Bezier:</strong> Trajectory lines are drawn as smooth Bezier curves connecting squares.</li>
                </ul>
            </div>

            <!-- PGN Menu -->
            <div class="outline-item">
                <h4 id="pgn-menu">6.4 PGN Menu</h4>
                
                <h5>6.4.1 Show Metadata</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+M</code> / <code>⌘+M</code></p>
                <p>Toggles the display of PGN header tags (Event, Site, Date, etc.) in the PGN Notation Pane.<br>See <a href="#detail-panel">section 4.5</a> for more information.</p>
                
                <h5>6.4.2 Show Comments</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+M</code> / <code>⌘+Shift+M</code></p>
                <p>Toggles the display of move comments in the PGN Notation Pane.<br>See <a href="#detail-panel">section 4.5</a> for more information.</p>
                
                <h5>6.4.3 Show Variations</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+V</code> / <code>⌘+Shift+V</code></p>
                <p>Toggles the display of move variations in the PGN Notation Pane.<br>See <a href="#detail-panel">section 4.5</a> for more information.</p>
                
                <h5>6.4.4 Show Non-Standard Tags</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+T</code> / <code>⌘+Shift+T</code></p>
                <p>Toggles the display of non-standard tags like [%evp] and [%mdl] within comments in the PGN Notation Pane.<br>See <a href="#detail-panel">section 4.5</a> for more information.</p>
                
                <h5>6.4.5 Show Annotations</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+A</code> / <code>⌘+Shift+A</code></p>
                <p>Toggles the display of move annotations (symbols like !, ?, and NAGs) in the PGN Notation Pane.<br>See <a href="#detail-panel">section 4.5</a> for more information.</p>
                
                <h5>6.4.6 Show Results</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+R</code> / <code>⌘+R</code></p>
                <p>Toggles the display of game results (1-0, 0-1, 1/2-1/2) in the PGN Notation Pane.<br>See <a href="#detail-panel">section 4.5</a> for more information.</p>
                
                <h5>6.4.7 Remove Comments</h5>
                <p>Permanently removes all comments from the active game's PGN notation. This action modifies the game's actual PGN content and cannot be undone. The game will be marked to contain unsaved changes and the changes will be persisted when you save the database.<br>See <a href="#detail-panel">section 4.5</a> for more information.</p>
                
                <h5>6.4.8 Remove Variations</h5>
                <p>Permanently removes all move variations from the active game's PGN notation. This action modifies the game's actual PGN content and cannot be undone. The game will be marked to contain unsaved changes and the changes will be persisted when you save the database.<br>See <a href="#detail-panel">section 4.5</a> for more information.</p>
                
                <h5>6.4.9 Remove Non-Standard Tags</h5>
                <p>Permanently removes non-standard tags (like [%evp] and [%mdl]) from comments in the active game's PGN. This action modifies the game's actual PGN content and cannot be undone. The game will be marked to contain unsaved changes and the changes will be persisted when you save the database.<br>See <a href="#detail-panel">section 4.5</a> for more information.</p>
                
                <h5>6.4.10 Remove Annotations</h5>
                <p>Permanently removes all move annotations (symbols and NAGs) from the active game's PGN notation. This action modifies the game's actual PGN content and cannot be undone. The game will be marked to contain unsaved changes and the changes will be persisted when you save the database.<br>See <a href="#detail-panel">section 4.5</a> for more information.</p>
            </div>

            <!-- Moves List Menu -->
            <div class="outline-item">
                <h4 id="moves-list-menu">6.5 Moves List Menu</h4>
                
                <h5>6.5.1 Column Profiles</h5>
                <p>The Moves List menu displays all available column profiles at the top. Each profile is a named configuration that defines which columns are visible and their order. Switch between profiles by selecting them from the menu or using number keys <code>1</code> through <code>9</code> (assigned to the first nine profiles).<br>See <a href="#moves-list">section 4.5.1</a> for detailed information about column profiles and default profiles.</p>
                
                <h5>6.5.2 Save Profile</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+P</code> / <code>⌘+Shift+P</code></p>
                <p>Saves the current column profile, overwriting the existing profile with the current column visibility, order, and width settings.<br>See <a href="#moves-list">section 4.5.1</a> for more information.</p>
                
                <h5>6.5.3 Save Profile as...</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Alt+P</code> / <code>⌘+⌥+P</code></p>
                <p>Creates a new column profile with a custom name, using the current column visibility, order, and width settings. The new profile is then accessible via the Moves List menu and is assigned a keyboard shortcut (1-9) based on its position in the profile list.<br>See <a href="#moves-list">section 4.5.1</a> for more information.</p>
                
                <h5>6.5.4 Remove Profile</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+Delete</code> / <code>⌘+Shift+Delete</code></p>
                <p>Permanently removes the currently active column profile.</p>
                
                <h5>6.5.5 Setup Profile...</h5>
                <p>Opens a dialog for configuring all column settings at once, including column visibility, order, and widths. This provides a convenient way to manage multiple columns simultaneously rather than toggling them individually.<br>See <a href="#moves-list">section 4.5.1</a> for more information.</p>
                <img src="screenshots/movelist_setup_profile_dialog.png" alt="CARA Moves List Setup Profile Dialog - Dialog for configuring column visibility, order, and widths for column profiles" style="max-width: 100%; height: auto; margin: 25px auto; border-radius: 5px; border: 1px solid rgb(60, 60, 65);" />
                
                <h5>6.5.6 Column Visibility</h5>
                <p>The Moves List menu includes submenus organized by column category for toggling individual column visibility:</p>
                <ul>
                    <li><strong>Basic Columns:</strong> Move number, White moves, Black moves, Comments</li>
                    <li><strong>Evaluation Columns:</strong> White/Black evaluations, CPL values (including top-2 and top-3 alternatives)</li>
                    <li><strong>Best Moves Columns:</strong> Best move alternatives for White/Black (including top-2 and top-3), Top-3 move indicators</li>
                    <li><strong>Analysis Columns:</strong> Move assessments (Brilliant, Best Move, Inaccuracy, etc.), Engine depth</li>
                    <li><strong>Material Columns:</strong> Captured pieces, Material counts</li>
                    <li><strong>Position Columns:</strong> ECO codes, Opening names, FEN positions</li>
                </ul>
                <p>Toggle any column's visibility by selecting it from the appropriate submenu. Changes are applied immediately but are not persisted until you save the profile.<br>See <a href="#moves-list">section 4.5.1</a> for more information.</p>
            </div>

            <!-- Game Analysis Menu -->
            <div class="outline-item">
                <h4 id="game-analysis-menu">6.6 Game Analysis Menu</h4>
                
                <h5>6.6.1 Start Game Analysis</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+G</code> / <code>⌘+G</code></p>
                <p>Initiates automatic analysis of the currently active game using the engine assigned to the Game Analysis task. The engine analyzes each move in the game, providing evaluations, move classifications, and best move alternatives.<br>See <a href="#analyzing-game">section 5.5</a> for detailed instructions.</p>
                
                <h5>6.6.2 Cancel Game Analysis</h5>
                <p><strong>Shortcut:</strong> <code>Escape</code></p>
                <p>Cancels an ongoing game analysis. This menu item is only enabled while analysis is in progress. When cancelled, analysis stops and any moves already analyzed remain in the Moves List. You can resume analysis later from where it left off.<br>See <a href="#cancelling-analysis">section 5.5.4</a> for more information.</p>
                
                <h5>6.6.3 Bulk Analyze Database...</h5>
                <p>Opens a dialog to analyze multiple games at once. CARA automatically optimizes available CPU cores to analyze multiple games in parallel, maximizing analysis speed. Progress and estimated time remaining are displayed in the status bar, and you can cancel and resume bulk analysis at any time.<br>See <a href="#bulk-analysis">section 5.5.5</a> for detailed instructions.</p>
                
                <h5>6.6.4 Configure Classification Settings...</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+K</code> / <code>⌘+Shift+K</code></p>
                <p>Opens a dialog to customize the thresholds used for move classification (Brilliant, Best Move, Good Move, Inaccuracy, Mistake, Blunder). These thresholds determine how moves are categorized based on Centipawn Loss (CPL) values.<br>See <a href="#analysis-results">section 5.5.2</a> for more information about move classifications.</p>
                
                <h5>6.6.5 Normalized Evaluation Graph</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+N</code> / <code>⌘+Shift+N</code></p>
                <p>Toggles the normalized evaluation graph display mode in the Moves List. When enabled, evaluation values are normalized to a scale that better highlights relative evaluation changes throughout the game, making it easier to identify critical moments and evaluation swings.</p>
                
                <h5>6.6.6 Post-Game Brilliancy Refinement</h5>
                <p>Toggles whether CARA performs an additional, deeper analysis after initial game analysis specifically to identify "Brilliant" moves. Brilliant moves often involve material sacrifices and may require deeper analysis to be properly classified. When enabled, this refinement step runs automatically after the main analysis completes.</p>
                
                <h5>6.6.7 Return to PLY 0 after analysis completes</h5>
                <p>Toggles whether CARA automatically navigates to the starting position (PLY 0) when analysis completes. When enabled, the board and Moves List automatically return to PLY 0 after analysis finishes.</p>
                
                <h5>6.6.8 Switch to Moves List at the start of Analysis</h5>
                <p>Toggles whether CARA automatically switches to the Moves List tab when analysis begins. This is enabled by default, ensuring you can immediately see analysis results as they are generated.</p>
                
                <h5>6.6.9 Switch to Game Summary after Analysis</h5>
                <p>Toggles whether CARA automatically switches to the Game Summary tab when analysis completes. When enabled, you are taken directly to the condensed overview of key game moments and statistics after analysis finishes.</p>
                
                <h5>6.6.10 Store Analysis results in PGN Tag</h5>
                <p>Toggles whether analysis results (evaluations, CPL values, move classifications) are saved in a PGN metadata tag for persistence across sessions. When enabled, analysis data is serialized and stored in the game's PGN, allowing you to preserve analysis results even after closing and reopening the database.</p>
            </div>

            <!-- Manual Analysis Menu -->
            <div class="outline-item">
                <h4 id="manual-analysis-menu">6.7 Manual Analysis Menu</h4>
                <h5>6.7.1 Start Manual Analysis</h5>
                <p><strong>Shortcut:</strong> <code>Alt+M</code> / <code>⌥+M</code></p>
                <p>Starts or stops continuous engine analysis of the current position. When enabled, the engine analyzes the current position and displays principal variation lines with evaluations, depths, and move sequences. Analysis continues automatically as you navigate to different positions. Use the same menu item or shortcut again to stop analysis.<br>See <a href="#starting-manual-analysis">section 5.6.1</a> for detailed instructions.</p>
                
                <h5>6.7.2 Add PV Line</h5>
                <p><strong>Shortcut:</strong> <code>Alt+N</code> / <code>⌥+N</code></p>
                <p>Adds an additional principal variation line to the MultiPV analysis display. This allows you to compare multiple candidate moves simultaneously. You can add as many lines as needed.<br>See <a href="#multipv-analysis">section 5.6.2</a> for more information.</p>
                
                <h5>6.7.3 Remove PV Line</h5>
                <p><strong>Shortcut:</strong> <code>Alt+R</code> / <code>⌥+R</code></p>
                <p>Removes the last added principal variation line from the MultiPV analysis display.<br>See <a href="#multipv-analysis">section 5.6.2</a> for more information.</p>
                
                <h5>6.7.4 Enable miniature preview</h5>
                <p>Toggles the miniature board preview feature. When enabled, hovering over moves in any PV line displays a small chessboard preview showing the position after that move. This helps you quickly visualize the resulting position.<br>See <a href="#exploring-variations">section 5.6.3</a> for more information.</p>
                
                <h5>6.7.5 Explore PV1 Positional Plans</h5>
                <p>Toggles positional plan exploration for the first principal variation line. When enabled, the chessboard displays colored trajectory lines showing how pieces move through the engine's recommended sequence. Only one plan can be active at a time.<br>See <a href="#positional-plan-exploration">section 5.6.4</a> for detailed instructions.</p>
                
                <h5>6.7.6 Explore PV2 Positional Plans</h5>
                <p>Toggles positional plan exploration for the second principal variation line. When enabled, the chessboard displays colored trajectory lines showing how pieces move through the engine's recommended sequence. Only one plan can be active at a time.<br>See <a href="#positional-plan-exploration">section 5.6.4</a> for detailed instructions.</p>
                
                <h5>6.7.7 Explore PV3 Positional Plans</h5>
                <p>Toggles positional plan exploration for the third principal variation line. When enabled, the chessboard displays colored trajectory lines showing how pieces move through the engine's recommended sequence. Only one plan can be active at a time.<br>See <a href="#positional-plan-exploration">section 5.6.4</a> for detailed instructions.</p>
                
                <h5>6.7.8 Max number of pieces to explore</h5>
                <p>Sets how many pieces to track in the positional plan exploration visualization. Options are 1, 2, or 3 pieces. The system automatically selects the pieces that move most frequently in the active PV line up to this limit. Each tracked piece is assigned a distinct color and displayed with trajectory lines on the chessboard.<br>See <a href="#positional-plan-exploration">section 5.6.4</a> for more information.</p>
                
                <h5>6.7.9 Max Exploration depth</h5>
                <p>Sets the exploration depth for piece trajectories in positional plan exploration. Options are 2, 3, or 4 moves ahead. This determines how many moves into the future the trajectory visualization extends, showing the complete path each piece takes through the engine's recommended sequence.<br>See <a href="#positional-plan-exploration">section 5.6.4</a> for more information.</p>
                
                <h5>6.7.10 Hide other arrows during plan exploration</h5>
                <p>Toggles whether other board arrows (played move, best alternative move, PV arrows) are hidden when positional plan exploration is active. When enabled, only the piece trajectory lines are displayed, providing a cleaner view focused on the positional plan visualization.</p>
            </div>

            <!-- Annotations Menu -->
            <div class="outline-item">
                <h4 id="annotations-menu">6.8 Annotations Menu</h4>
                
                <h5>6.8.1 Clear all Annotations for current game</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Shift+D</code> / <code>⌘+Shift+D</code></p>
                <p>Removes all annotations from the entire active game. This action affects all positions in the game and cannot be undone.<br>See <a href="#managing-annotations">section 5.8.3</a> for more information.</p>
                
                <h5>6.8.2 Clear all Annotations for current move</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Alt+D</code></p>
                <p>Removes all annotations for the current position (move) in the game. Annotations for other positions remain unchanged.<br>See <a href="#managing-annotations">section 5.8.3</a> for more information.</p>
                
                <h5>6.8.3 Save Annotations to current game</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+Alt+S</code></p>
                <p>Saves all annotations to the active game by serializing them into a PGN metadata tag. Annotations are compressed and stored separately from the PGN move notation, keeping the PGN clean. This marks the game as modified, and annotations will be persisted when you save the database.<br>See <a href="#managing-annotations">section 5.8.3</a> for more information.</p>
                
                <h5>6.8.4 Setup Preferences...</h5>
                <p>Opens the Annotation Preferences dialog for customizing the annotation color palette and text font settings. Changes are saved to your user settings and persist across sessions.<br>See <a href="#annotation-preferences">section 5.8.2</a> for detailed instructions.</p>
            </div>

            <!-- Engines Menu -->
            <div class="outline-item">
                <h4 id="engines-menu">6.9 Engines Menu</h4>
                
                <h5>6.9.1 Add Engine...</h5>
                <p><strong>Shortcut:</strong> <code>Ctrl+E</code></p>
                <p>Opens a dialog to add a new UCI-compatible chess engine to CARA. You can browse for the engine executable file, and CARA will automatically validate that it supports the UCI protocol. The first engine you add is automatically assigned to all analysis tasks.<br>See <a href="#adding-first-engine">section 5.1.1</a> for detailed instructions.</p>
                
                <div class="tip-box">
                    <strong>Quick Tip:</strong> CARA works with any UCI-compatible chess engine. Here are some recommended options:
                    <ul style="margin-top: 8px; margin-bottom: 0;">
                        <li><strong>Free engines:</strong> <a href="https://stockfishchess.org/download/" target="_blank">Stockfish</a> (open-source, very strong), <a href="https://github.com/official-stockfish/Stockfish" target="_blank">Berserk</a> (Stockfish derivative), <a href="https://lczero.org/" target="_blank">Leela Chess Zero (Lc0)</a> (neural network-based)</li>
                        <li><strong>Commercial engines:</strong> <a href="https://www.shredderchess.com/" target="_blank">Shredder</a>, <a href="https://komodochess.com/" target="_blank">Komodo</a>, <a href="https://www.chessbase.com/en/product/chessbase-engines" target="_blank">ChessBase engines</a> (Fritz, Houdini, etc.)</li>
                    </ul>
                </div>
                
                <h5>6.9.2 Engine Submenus</h5>
                <p>For each configured engine, a submenu is displayed with the engine's name. Each submenu provides the following options:</p>
                <ul>
                    <li><strong>Remove Engine:</strong> Permanently removes the engine from CARA. If the engine is currently assigned to any tasks, those assignments are cleared. CARA automatically ensures that at least one engine is always assigned to each analysis task.</li>
                    <li><strong>Engine Configuration:</strong> Opens the engine configuration dialog for setting per-task parameters (thread count, depth limits, time limits, and engine-specific options) for evaluation, game analysis, and manual analysis tasks.<br>See <a href="#adding-additional-engines">section 5.1.2</a> for more information.</li>
                    <li><strong>Set as Game Analysis Engine:</strong> Assigns the engine to the game analysis task.</li>
                    <li><strong>Set as Evaluation Engine:</strong> Assigns the engine to the evaluation task (used for the evaluation bar).</li>
                    <li><strong>Set as Manual Analysis Engine:</strong> Assigns the engine to the manual analysis task.</li>
                </ul>
                <p>Only one engine can be assigned to each task at a time.<br>See <a href="#adding-additional-engines">section 5.1.2</a> for more information about task assignment.</p>
            </div>

            <!-- AI Summary Menu -->
            <div class="outline-item">
                <h4 id="ai-summary-menu">6.10 AI Summary Menu</h4>
                
                <h5>6.10.1 AI Model Settings...</h5>
                <p>Opens a dialog for configuring AI model settings, including API keys and default model selection for the two supported providers OpenAI and Anthropic. You must configure at least one API key and select a model before using the AI Summary feature.<br>See <a href="#ai-summary">section 4.5.7</a> for more information.</p>
                <p>To acquire API keys:</p>
                <ul>
                    <li><strong>OpenAI:</strong> Sign up at <a href="https://platform.openai.com/signup" target="_blank">platform.openai.com</a> and create an API key in your account settings. Visit <a href="https://platform.openai.com/api-keys" target="_blank">platform.openai.com/api-keys</a> to manage your keys.</li>
                    <li><strong>Anthropic:</strong> Sign up at <a href="https://console.anthropic.com/signup" target="_blank">console.anthropic.com</a> and create an API key in your account settings. Visit <a href="https://console.anthropic.com/settings/keys" target="_blank">console.anthropic.com/settings/keys</a> to manage your keys.</li>
                </ul>
                
                <h5>6.10.2 Use OpenAI Models</h5>
                <p>Toggles whether to use OpenAI models for AI Summary. When enabled, OpenAI models are available for selection. This option is mutually exclusive with "Use Anthropic Models"—only one provider can be active at a time.</p>
                
                <h5>6.10.3 Use Anthropic Models</h5>
                <p>Toggles whether to use Anthropic models for AI Summary. When enabled, Anthropic models are available for selection. This option is mutually exclusive with "Use OpenAI Models"—only one provider can be active at a time.</p>
                
                <h5>6.10.4 Include Game Analysis Data in Pre-Prompt</h5>
                <p>Toggles whether game analysis data (evaluations, move classifications, CPL values, best move alternatives) is included in the pre-prompt sent to the AI model. When enabled, the AI has access to detailed engine analysis, enabling more accurate assessments of moves and positions.</p>
                
                <h5>6.10.5 Include PGN Metadata tags in Pre-Prompt</h5>
                <p>Toggles whether PGN metadata tags (player names, ELO ratings, event information, etc.) are included in the pre-prompt sent to the AI model. When enabled, the AI has access to game metadata, providing context for more informed responses.</p>
            </div>

            <!-- Help Menu -->
            <div class="outline-item">
                <h4 id="help-menu">6.11 Help Menu</h4>
                
                <h5>6.11.1 About...</h5>
                <p>Opens the About dialog displaying application information, including the application name, version number, description, and copyright information. The dialog provides a quick reference for identifying the CARA version you are using.</p>
            </div>

            <!-- Keyboard Shortcuts Reference -->
            <div class="outline-item">
                <h4 id="complete-keyboard-shortcuts">6.12 Complete Keyboard Shortcuts</h4>
                <p>This section provides a comprehensive reference of all keyboard shortcuts in CARA.</p>
                
                <h5>6.12.1 Game Navigation</h5>
                <p>Essential shortcuts for navigating through games:</p>
                <ul>
                    <li><code>Right Arrow</code>: Navigate to next move</li>
                    <li><code>Left Arrow</code>: Navigate to previous move</li>
                </ul>
                
                <h5>6.12.2 Detail Panel Tabs</h5>
                <p>Quick access to different analysis views:</p>
                <ul>
                    <li><code>F1</code>: Switch to Moves List tab</li>
                    <li><code>F2</code>: Switch to Metadata tab</li>
                    <li><code>F3</code>: Switch to Manual Analysis tab</li>
                    <li><code>F4</code>: Switch to Game Summary tab</li>
                    <li><code>F5</code>: Switch to Player Stats tab</li>
                    <li><code>F6</code>: Switch to Annotations tab</li>
                    <li><code>F7</code>: Switch to AI Summary tab</li>
                </ul>
                
                <h5>6.12.3 Game Analysis</h5>
                <p>Shortcuts for analyzing games:</p>
                <ul>
                    <li><code>Ctrl+G</code> / <code>⌘+G</code>: Start game analysis for the current game</li>
                    <li><code>Escape</code>: Cancel ongoing game analysis</li>
                    <li><code>Ctrl+Shift+K</code> / <code>⌘+Shift+K</code>: Configure move classification settings</li>
                    <li><code>Ctrl+Shift+N</code> / <code>⌘+Shift+N</code>: Toggle normalized evaluation graph mode</li>
                </ul>
                
                <h5>6.12.4 File Operations</h5>
                <p>Standard file management shortcuts:</p>
                <ul>
                    <li><code>Ctrl+O</code> / <code>⌘+O</code>: Open PGN database</li>
                    <li><code>Ctrl+S</code> / <code>⌘+S</code>: Save active PGN database</li>
                    <li><code>Ctrl+Shift+S</code> / <code>⌘+Shift+S</code>: Save active PGN database as...</li>
                    <li><code>Ctrl+W</code> / <code>⌘+W</code>: Close active PGN database</li>
                    <li><code>Ctrl+Q</code> / <code>⌘+Q</code>: Close application</li>
                </ul>
                
                <h5>6.12.5 Importing and Opening Games</h5>
                <p>Shortcuts for importing and opening games:</p>
                <ul>
                    <li><code>Ctrl+V</code> / <code>⌘+V</code>: Paste PGN to Clipboard database</li>
                    <li><code>Ctrl+Alt+V</code> / <code>⌘+⌥+V</code>: Paste PGN to active database</li>
                    <li><code>Ctrl+Shift+I</code> / <code>⌘+Shift+I</code>: Import games from online platforms</li>
                </ul>
                
                <h5>6.12.6 Copy and Cut Operations</h5>
                <p>Shortcuts for copying and moving game data:</p>
                <ul>
                    <li><code>Ctrl+P</code> / <code>⌘+P</code>: Copy active game PGN to clipboard</li>
                    <li><code>Shift+F</code>: Copy current board position (FEN) to clipboard</li>
                    <li><code>Ctrl+F</code> / <code>⌘+F</code>: Paste FEN position to board</li>
                    <li><code>Ctrl+Shift+C</code> / <code>⌘+Shift+C</code>: Copy selected games to clipboard</li>
                    <li><code>Ctrl+Shift+X</code>: Cut selected games to clipboard</li>
                </ul>
                
                <h5>6.12.7 Moves List Column Profiles</h5>
                <p>Shortcuts for managing and switching column profiles:</p>
                <ul>
                    <li><code>1</code> - <code>9</code>: Switch to column profile 1 through 9</li>
                    <li><code>Ctrl+Shift+P</code> / <code>⌘+Shift+P</code>: Save current profile</li>
                    <li><code>Ctrl+Alt+P</code> / <code>⌘+⌥+P</code>: Save current profile as...</li>
                    <li><code>Ctrl+Shift+Delete</code> / <code>⌘+Shift+Delete</code>: Remove current profile</li>
                </ul>
                
                <h5>6.12.8 Board Display Options</h5>
                <p>Shortcuts for toggling board display elements:</p>
                <ul>
                    <li><code>X</code>: Rotate board 180 degrees</li>
                    <li><code>Alt+C</code> / <code>⌥+C</code>: Toggle coordinates display</li>
                    <li><code>Alt+T</code> / <code>⌥+T</code>: Toggle turn indicator</li>
                    <li><code>Alt+I</code> / <code>⌥+I</code>: Toggle game information display</li>
                    <li><code>Alt+E</code> / <code>⌥+E</code>: Toggle evaluation bar</li>
                    <li><code>Alt+U</code> / <code>⌥+U</code>: Toggle material widget</li>
                    <li><code>Alt+H</code> / <code>⌥+H</code>: Toggle positional heatmap</li>
                    <li><code>Alt+P</code> / <code>⌥+P</code>: Toggle played move arrow</li>
                    <li><code>Alt+B</code> / <code>⌥+B</code>: Toggle best next move arrow (PV1)</li>
                    <li><code>Alt+2</code> / <code>⌥+2</code>: Toggle PV2 arrow</li>
                    <li><code>Alt+3</code> / <code>⌥+3</code>: Toggle PV3 arrow</li>
                    <li><code>Alt+A</code> / <code>⌥+A</code>: Toggle best alternative move arrow</li>
                    <li><code>Alt+L</code> / <code>⌥+L</code>: Toggle annotations layer</li>
                </ul>
                
                <h5>6.12.9 Manual Analysis</h5>
                <p>Shortcuts for manual position analysis:</p>
                <ul>
                    <li><code>Alt+M</code> / <code>⌥+M</code>: Start or stop continuous engine analysis</li>
                    <li><code>Alt+N</code> / <code>⌥+N</code>: Add principal variation line</li>
                    <li><code>Alt+R</code> / <code>⌥+R</code>: Remove principal variation line</li>
                </ul>
                
                <h5>6.12.10 Annotations</h5>
                <p>Shortcuts for managing annotations:</p>
                <ul>
                    <li><code>Ctrl+Alt+S</code>: Save annotations to current game</li>
                    <li><code>Ctrl+Alt+D</code>: Clear all annotations for current move</li>
                    <li><code>Ctrl+Shift+D</code> / <code>⌘+Shift+D</code>: Clear all annotations for current game</li>
                </ul>
                
                <h5>6.12.11 Engine Management</h5>
                <p>Shortcuts for managing chess engines:</p>
                <ul>
                    <li><code>Ctrl+E</code>: Add engine</li>
                </ul>
                
                <h5>6.12.12 Database Operations</h5>
                <p>Shortcuts for database management and bulk operations:</p>
                <ul>
                    <li><code>Ctrl+Shift+F</code> / <code>⌘+Shift+F</code>: Search games across databases</li>
                    <li><code>Ctrl+Shift+W</code> / <code>⌘+Shift+W</code>: Close search results tab</li>
                    <li><code>Ctrl+Shift+R</code> / <code>⌘+Shift+R</code>: Bulk replace tags</li>
                    <li><code>Ctrl+Alt+T</code> / <code>⌘+⌥+T</code>: Bulk add/remove tags</li>
                    <li><code>Ctrl+Shift+L</code> / <code>⌘+Shift+L</code>: Bulk clean PGN</li>
                    <li><code>Ctrl+Shift+U</code> / <code>⌘+Shift+U</code>: Deduplicate games</li>
                    <li><code>Ctrl+Shift+C</code> / <code>⌘+Shift+C</code>: Clear Clipboard database</li>
                </ul>
                
                <h5>6.12.13 PGN Display Options</h5>
                <p>Shortcuts for controlling PGN notation display:</p>
                <ul>
                    <li><code>Ctrl+M</code> / <code>⌘+M</code>: Toggle metadata display</li>
                    <li><code>Ctrl+Shift+M</code> / <code>⌘+Shift+M</code>: Toggle comments display</li>
                    <li><code>Ctrl+Shift+V</code> / <code>⌘+Shift+V</code>: Toggle variations display</li>
                    <li><code>Ctrl+Shift+T</code> / <code>⌘+Shift+T</code>: Toggle non-standard tags display</li>
                    <li><code>Ctrl+Shift+A</code> / <code>⌘+Shift+A</code>: Toggle annotations display</li>
                    <li><code>Ctrl+R</code> / <code>⌘+R</code>: Toggle results display</li>
                </ul>
            </div>
        </section>

        <!-- 7. ADVANCED TOPICS -->
        <section id="advanced-topics">
            <h2>7. Advanced Topics</h2>
            
            <div class="outline-item">
                <h4 id="customizing-config">7.1 Customizing config.json</h4>
                <p>The <code>config.json</code> file controls all UI styling, layout dimensions, colors, fonts, and application-wide default settings. While the file is read-only from the application's perspective, you can manually edit it to customize CARA's appearance without modifying any source code.</p>
                
                <h5>7.1.1 File Structure</h5>
                <p>The <code>config.json</code> file is located in the <code>app/config/</code> directory and uses a hierarchical JSON structure. Colors are specified as RGB arrays with values from 0 to 255 (e.g., <code>[217, 217, 217]</code> for light gray). Font sizes are specified in points, and dimensions are in pixels.</p>
                
                <h5>7.1.2 Example: Changing Chessboard Square Colors</h5>
                <p>To change the colors of the chessboard squares:</p>
                <ol>
                    <li><strong>Locate the squares configuration:</strong><br>
                    Open <code>config.json</code> in a text editor and navigate to:<br>
                    <code>ui → panels → main → board → squares</code></li>
                    
                    <li><strong>Modify the color values:</strong><br>
                    You'll find two color properties:
                    <ul>
                        <li><code>"light_color": [217, 217, 217]</code> - Color for light squares (default: light gray)</li>
                        <li><code>"dark_color": [58, 117, 196]</code> - Color for dark squares (default: blue)</li>
                    </ul>
                    Change these RGB arrays to your desired colors. For example, to use a classic green and cream color scheme:
                    <pre><code>"squares": {
    "light_color": [240, 217, 181],
    "dark_color": [181, 136, 99]
}</code></pre>
                    </li>
                    
                    <li><strong>Save and restart:</strong><br>
                    Save the file and restart CARA for the changes to take effect. If the JSON syntax is invalid, CARA will display an error message and may fail to start.</li>
                </ol>
                
                <div class="tip-box">
                    <strong>Important:</strong> Always make a backup copy of <code>config.json</code> before making changes. Invalid JSON syntax will prevent CARA from starting. Use a JSON validator or text editor with JSON syntax checking to ensure your changes are valid.
                </div>
                
                <h5>7.1.3 Other Common Customizations</h5>
                <p>You can customize many other visual elements in <code>config.json</code>:</p>
                <ul>
                    <li><strong>Arrow colors:</strong> Modify colors for played move, best move, PV arrows, and best alternative move arrows in <code>ui → panels → main → board</code></li>
                    <li><strong>Font families and sizes:</strong> Change fonts throughout the application in various <code>font_family</code> and <code>font_size</code> properties</li>
                    <li><strong>Dialog dimensions:</strong> Adjust dialog widths and heights in <code>ui → dialogs</code></li>
                    <li><strong>Panel colors:</strong> Modify background colors, borders, and text colors in <code>ui → panels</code></li>
                    <li><strong>Move classification colors:</strong> Customize colors for move classifications (Brilliant, Best Move, Inaccuracy, etc.) in <code>ui → panels → detail → moveslist → colors</code></li>
                </ul>
            </div>
            
            <div class="outline-item">
                <h4 id="understanding-user-settings">7.2 Understanding user_settings.json</h4>
                <p>The <code>user_settings.json</code> file stores your personal preferences and settings. While most settings are managed through the application interface, understanding the file structure can be helpful for advanced users who want to manually edit settings or transfer configurations between installations.</p>
                
                <h5>7.2.1 File Structure</h5>
                <p>The file contains several main sections:</p>
                <ul>
                    <li><strong>moves_list_profiles:</strong> Column profile definitions with visibility, width, and order settings for each profile</li>
                    <li><strong>active_profile:</strong> The currently active column profile name</li>
                    <li><strong>board_visibility:</strong> Toggle states for board display elements (coordinates, arrows, evaluation bar, etc.)</li>
                    <li><strong>pgn_visibility:</strong> Toggle states for PGN notation display options</li>
                    <li><strong>game_analysis:</strong> Game analysis preferences (return to PLY 0, switch tabs, etc.)</li>
                    <li><strong>manual_analysis:</strong> Manual analysis settings (max pieces to explore, exploration depth, etc.)</li>
                    <li><strong>engines:</strong> List of configured engines with their paths and metadata</li>
                    <li><strong>engine_assignments:</strong> Engine assignments for each analysis task</li>
                    <li><strong>ai_models:</strong> AI model configurations for OpenAI and Anthropic providers</li>
                    <li><strong>ai_summary:</strong> AI Summary preferences</li>
                    <li><strong>annotations:</strong> Annotation color palette and font settings</li>
                </ul>
                
                <h5>7.2.2 Manual Editing Considerations</h5>
                <p>While you can manually edit <code>user_settings.json</code>, be aware that:</p>
                <ul>
                    <li>The file is automatically overwritten when you save settings through the application</li>
                    <li>Invalid JSON syntax will cause the application to fail loading settings (it will fall back to defaults)</li>
                    <li>Some settings have dependencies (e.g., <code>active_profile</code> must reference a profile that exists in <code>moves_list_profiles</code>)</li>
                    <li>It's recommended to close CARA before editing the file to avoid conflicts</li>
                </ul>
            </div>
            
            <div class="outline-item">
                <h4 id="understanding-engine-parameters">7.3 Understanding engine_parameters.json</h4>
                <p>The <code>engine_parameters.json</code> file stores engine-specific parameters and options for each configured chess engine. This file is automatically managed by the application, but understanding its structure can help with advanced engine configuration.</p>
                
                <h5>7.3.1 File Structure</h5>
                <p>The file contains a dictionary mapping engine IDs to parameter configurations. Each engine entry includes:</p>
                <ul>
                    <li><strong>Per-task parameters:</strong> Separate parameter sets for <code>evaluation</code>, <code>game_analysis</code>, and <code>manual_analysis</code> tasks</li>
                    <li><strong>Thread count:</strong> Number of CPU threads to use</li>
                    <li><strong>Depth limits:</strong> Maximum search depth</li>
                    <li><strong>Time limits:</strong> Time per move or position</li>
                    <li><strong>Engine-specific options:</strong> UCI options specific to each engine (e.g., Hash size, MultiPV, etc.)</li>
                </ul>
                
                <h5>7.3.2 Manual Editing</h5>
                <p>Manual editing of <code>engine_parameters.json</code> is generally not recommended, as the application manages this file automatically. However, if you need to make advanced changes:</p>
                <ul>
                    <li>Close CARA before editing to avoid conflicts</li>
                    <li>Ensure the engine ID matches an engine in <code>user_settings.json</code></li>
                    <li>Validate that UCI option names and values are correct for your engine</li>
                    <li>Back up the file before making changes</li>
                </ul>
            </div>
            
            <div class="outline-item">
                <h4 id="pgn-metadata-tags">7.4 PGN Metadata Tags Used by CARA</h4>
                <p>CARA uses several custom PGN metadata tags to store analysis data and annotations. Understanding these tags can help you work with CARA-generated PGN files in other applications or manually inspect the stored data.</p>
                
                <h5>7.4.1 Analysis Data Tags</h5>
                <p>When "Store Analysis results in PGN Tag" is enabled, CARA stores analysis data in compressed format:</p>
                <ul>
                    <li><strong>[CARAAnalysisData "..."]:</strong> Contains compressed, base64-encoded JSON data with evaluations, CPL values, move classifications, best moves, and engine depths for each move</li>
                    <li><strong>[CARAAnalysisInfo "..."]:</strong> Contains metadata about the analysis (app version, creation date/time)</li>
                    <li><strong>[CARAAnalysisChecksum "..."]:</strong> SHA-256 checksum for data integrity validation</li>
                </ul>
                <p>The analysis data is stored as gzip-compressed JSON, then base64-encoded to ensure it's valid within PGN tag values. This keeps the PGN file size manageable while preserving all analysis information.</p>
                
                <h5>7.4.2 Annotation Tags</h5>
                <p>When annotations are saved to a game, CARA stores them in a similar compressed format:</p>
                <ul>
                    <li><strong>[CARAAnnotations "..."]:</strong> Contains compressed, base64-encoded JSON data with all annotation objects (text, arrows, circles, squares) organized by move (ply index)</li>
                    <li><strong>[CARAAnnotationsInfo "..."]:</strong> Contains metadata about the annotations (app version, creation date/time)</li>
                    <li><strong>[CARAAnnotationsChecksum "..."]:</strong> SHA-256 checksum for data integrity validation</li>
                </ul>
                <p>Each annotation includes its type, position, color, size, rotation, and other properties. The data is compressed and encoded to keep PGN files clean and manageable.</p>
                
                <h5>7.4.3 Tag Visibility</h5>
                <p>These custom tags are automatically hidden from the PGN Notation Pane display to keep the move notation clean. They are always excluded from PGN view, regardless of the "Show Non-Standard Tags" setting. The tags remain in the PGN file and are preserved when saving databases.</p>
            </div>
            
            <div class="outline-item">
                <h4 id="troubleshooting">7.5 Troubleshooting</h4>
                <p>This section covers common issues and their solutions.</p>
                
                <h5>7.5.1 Application Won't Start</h5>
                <p>If CARA fails to start, check the following:</p>
                <ul>
                    <li><strong>Invalid config.json:</strong> If you've edited <code>config.json</code>, verify the JSON syntax is valid. Use a JSON validator or text editor with JSON syntax checking. Restore from backup if needed.</li>
                    <li><strong>Missing dependencies:</strong> Ensure all required Python libraries are installed. Run <code>pip list</code> to verify PyQt6, python-chess, and requests are present.</li>
                    <li><strong>Python version:</strong> Verify you're using Python 3.8 or higher with <code>python --version</code>.</li>
                </ul>
                
                <h5>7.5.2 Engine Validation Errors</h5>
                <p>If an engine fails validation:</p>
                <ul>
                    <li><strong>Check engine path:</strong> Ensure the engine executable path is correct and the file exists</li>
                    <li><strong>Verify UCI support:</strong> The engine must support the UCI (Universal Chess Interface) protocol</li>
                    <li><strong>Check permissions:</strong> Ensure the engine executable has execute permissions</li>
                    <li><strong>Test engine manually:</strong> Try running the engine from the command line to verify it works</li>
                </ul>
                
                <h5>7.5.3 Settings Not Persisting</h5>
                <p>If your settings aren't being saved:</p>
                <ul>
                    <li><strong>Check file permissions:</strong> Ensure CARA has write permissions in its directory for <code>user_settings.json</code> and <code>engine_parameters.json</code></li>
                    <li><strong>Verify file location:</strong> Check that settings files are being created in the CARA root directory</li>
                    <li><strong>Check for errors:</strong> Look for error messages in the status bar or console output</li>
                </ul>
                
                <h5>7.5.4 Analysis Not Working</h5>
                <p>If game analysis isn't working:</p>
                <ul>
                    <li><strong>Verify engine assignment:</strong> Ensure an engine is assigned to the "Game Analysis" task via <span class="menu-item">Engines → [Engine Name] → Set as Game Analysis Engine</span></li>
                    <li><strong>Check engine status:</strong> Verify the engine is valid and can be started</li>
                    <li><strong>Review engine parameters:</strong> Check that engine parameters (threads, depth, time) are reasonable</li>
                    <li><strong>Check system resources:</strong> Ensure you have sufficient CPU and memory available</li>
                </ul>
            </div>
            
            <div class="outline-item">
                <h4 id="performance-optimization">7.6 Performance Optimization</h4>
                <p>This section provides tips for optimizing CARA's performance, especially when working with large databases or performing intensive analysis.</p>
                
                <h5>7.6.1 Engine Configuration</h5>
                <p>Optimize engine performance by configuring appropriate parameters:</p>
                <ul>
                    <li><strong>Thread count:</strong> Set thread count to match your CPU core count for maximum parallelization. For bulk analysis, CARA automatically optimizes thread usage across multiple games.</li>
                    <li><strong>Task-specific engines:</strong> Use a fast engine for evaluation (continuous updates) and a stronger engine for deep game analysis</li>
                    <li><strong>Depth vs. time:</strong> For faster analysis, use time limits rather than depth limits. For deeper analysis, use depth limits with appropriate thread counts</li>
                </ul>
                
                <h5>7.6.2 Database Management</h5>
                <p>Improve performance when working with large databases:</p>
                <ul>
                    <li><strong>Split large databases:</strong> Consider splitting very large databases (10,000+ games) into smaller files for faster loading and searching</li>
                    <li><strong>Use search filters:</strong> Use the search function to work with filtered subsets rather than loading entire large databases</li>
                    <li><strong>Close unused databases:</strong> Close database tabs you're not actively using to free memory</li>
                </ul>
                
                <h5>7.6.3 Analysis Workflow</h5>
                <p>Optimize your analysis workflow:</p>
                <ul>
                    <li><strong>Bulk analysis:</strong> Use bulk analysis for multiple games rather than analyzing them individually. CARA automatically parallelizes analysis across available CPU cores</li>
                    <li><strong>Disable unnecessary features:</strong> Turn off features you're not using (e.g., positional heatmap, evaluation bar) during analysis to reduce overhead</li>
                    <li><strong>Store analysis results:</strong> Enable "Store Analysis results in PGN Tag" to avoid re-analyzing games, but be aware this increases PGN file size</li>
                </ul>
            </div>
            
            <div class="outline-item">
                <h4 id="moves-list-columns-reference">7.7 Moves List Columns Reference</h4>
                <p>The following table describes all available columns:</p>
                
                <div class="column-table-wrapper">
                    <table class="column-table">
                        <thead>
                            <tr>
                                <th class="column-name-header">Column Name</th>
                                <th style="min-width: 200px;">Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="column-category-row">
                                <td colspan="2" class="column-category-cell">Basic Columns</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">#</td>
                                <td>Move number (1, 2, 3, ...)</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">White</td>
                                <td>White's move in SAN notation</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">Black</td>
                                <td>Black's move in SAN notation</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">Comment</td>
                                <td>Move comments from PGN</td>
                            </tr>
                            <tr class="column-category-row">
                                <td colspan="2" class="column-category-cell">Evaluation Columns</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">Eval White</td>
                                <td>Evaluation after white's move (formatted as "+X.X" or "M{N}")</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">Eval Black</td>
                                <td>Evaluation after black's move (formatted as "-X.X" or "-M{N}")</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">CPL White</td>
                                <td>Centipawn loss for white's move. CPL measures evaluation lost by playing a move instead of the best move: <code style="background-color: rgb(30, 30, 35); padding: 2px 6px; border-radius: 3px;">CPL = |eval_after_best_move - eval_after_played_move|</code></td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">CPL Black</td>
                                <td>Centipawn loss for black's move</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">CPL White 2</td>
                                <td>CPL for white's move vs. PV2 (second-best engine move)</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">CPL White 3</td>
                                <td>CPL for white's move vs. PV3 (third-best engine move)</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">CPL Black 2</td>
                                <td>CPL for black's move vs. PV2 (second-best engine move)</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">CPL Black 3</td>
                                <td>CPL for black's move vs. PV3 (third-best engine move)</td>
                            </tr>
                            <tr class="column-category-row">
                                <td colspan="2" class="column-category-cell">Best Moves Columns</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">Best White</td>
                                <td>Engine's best move suggestion for white (SAN notation)</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">Best Black</td>
                                <td>Engine's best move suggestion for black (SAN notation)</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">Best White 2</td>
                                <td>Engine's second-best move (PV2) for white</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">Best White 3</td>
                                <td>Engine's third-best move (PV3) for white</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">Best Black 2</td>
                                <td>Engine's second-best move (PV2) for black</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">Best Black 3</td>
                                <td>Engine's third-best move (PV3) for black</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">White Is Top 3</td>
                                <td>"✓" if white's move matches any top 3 engine moves, empty otherwise</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">Black Is Top 3</td>
                                <td>"✓" if black's move matches any top 3 engine moves, empty otherwise</td>
                            </tr>
                            <tr class="column-category-row">
                                <td colspan="2" class="column-category-cell">Analysis Columns</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">Assess White</td>
                                <td>Move quality assessment for white's move (Brilliant, Best Move, Good Move, Inaccuracy, Mistake, Blunder, Miss, or Book Move). Assessment thresholds are configurable in the classification settings.</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">Assess Black</td>
                                <td>Move quality assessment for black's move. Assessment thresholds are configurable in the classification settings.</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">White Depth</td>
                                <td>Engine search depth for white's move analysis</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">Black Depth</td>
                                <td>Engine search depth for black's move analysis</td>
                            </tr>
                            <tr class="column-category-row">
                                <td colspan="2" class="column-category-cell">Material Columns</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">White Capture</td>
                                <td>Piece captured by white's move (e.g., "P", "N", "R")</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">Black Capture</td>
                                <td>Piece captured by black's move (e.g., "P", "N", "R")</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">White Material</td>
                                <td>White's material balance in centipawns after move (calculated using piece values: Pawn: 100, Knight/Bishop: 300, Rook: 500, Queen: 900)</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">Black Material</td>
                                <td>Black's material balance in centipawns after move</td>
                            </tr>
                            <tr class="column-category-row">
                                <td colspan="2" class="column-category-cell">Position Columns</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">Eco</td>
                                <td>ECO code (opening classification, e.g., "B20")</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">Opening Name</td>
                                <td>Opening name from ECO database</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">FEN White</td>
                                <td>FEN string of position after white's move</td>
                            </tr>
                            <tr>
                                <td class="column-name-cell">FEN Black</td>
                                <td>FEN string of position after black's move</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="outline-item">
                <h4 id="customizing-formulas">7.8 Customizing ELO and Accuracy Formulas</h4>
                <p>CARA allows you to customize the formulas used to calculate estimated ELO ratings and accuracy percentages for players. These formulas are defined in <code>config.json</code>.</p>
                
                <h5>7.8.1 Configuration Location</h5>
                <p>The formula configurations are located in <code>config.json</code> under the <code>game_analysis</code> section:</p>
                <ul>
                    <li><code>game_analysis → elo_estimation</code> - Formula for estimating player ELO</li>
                    <li><code>game_analysis → accuracy_formula</code> - Formula for calculating overall player accuracy</li>
                    <li><code>game_analysis → phase_accuracy_formulas</code> - Formulas for calculating phase-specific accuracy (opening, middlegame, endgame)</li>
                </ul>
                
                <h5>7.8.2 Formula Structure</h5>
                <p>Each formula configuration contains the following fields:</p>
                <ul>
                    <li><strong><code>formula</code>:</strong> A string containing the mathematical expression to evaluate. If omitted or empty, CARA uses the default formula.</li>
                    <li><strong><code>value_on_error</code>:</strong> The value to return if the formula evaluation fails (default: <code>0</code> for ELO, <code>0.0</code> for accuracy).</li>
                    <li><strong><code>_examples</code>:</strong> (Optional) A dictionary of example formulas for reference. These are not used by the application but serve as documentation.</li>
                </ul>
                
                <div class="tip-box">
                    <strong>Important:</strong> Always make a backup copy of <code>config.json</code> before making changes. Invalid JSON syntax will prevent CARA from loading the configuration file. Formula evaluation errors will cause CARA to use the <code>value_on_error</code> value. If the <code>formula</code> field is missing or empty, CARA will use the default formula.
                </div>
                
                <h5>7.8.3 Available Variables</h5>
                <p><strong>Variables for Overall Accuracy and ELO Formulas:</strong> The following variables are available for use in overall accuracy and ELO estimation formulas:</p>
                <ul>
                    <li><strong><code>total_moves</code>:</strong> Total number of moves in the game (integer)</li>
                    <li><strong><code>non_book_moves</code>:</strong> Number of moves analyzed (excluding book moves) (integer)</li>
                    <li><strong><code>book_moves</code>:</strong> Number of book moves (moves found in opening books) (integer)</li>
                    <li><strong><code>blunders</code>:</strong> Number of blunders made by the player (integer)</li>
                    <li><strong><code>mistakes</code>:</strong> Number of mistakes made by the player (integer)</li>
                    <li><strong><code>inaccuracies</code>:</strong> Number of inaccuracies made by the player (integer)</li>
                    <li><strong><code>misses</code>:</strong> Number of missed opportunities (brilliant moves not played) (integer)</li>
                    <li><strong><code>best_moves</code>:</strong> Number of best moves played (integer)</li>
                    <li><strong><code>good_moves</code>:</strong> Number of good moves played (integer)</li>
                    <li><strong><code>brilliant_moves</code>:</strong> Number of brilliant moves played (integer)</li>
                    <li><strong><code>average_cpl</code>:</strong> Average centipawn loss across all analyzed moves (float)</li>
                    <li><strong><code>median_cpl</code>:</strong> Median centipawn loss across all analyzed moves (float)</li>
                    <li><strong><code>min_cpl</code>:</strong> Minimum centipawn loss (best move) (float)</li>
                    <li><strong><code>max_cpl</code>:</strong> Maximum centipawn loss (worst move) (float)</li>
                    <li><strong><code>blunder_rate</code>:</strong> Blunder rate as a decimal (0.0 to 1.0) (float)</li>
                    <li><strong><code>mistake_rate</code>:</strong> Mistake rate as a decimal (0.0 to 1.0) (float)</li>
                    <li><strong><code>accuracy</code>:</strong> Calculated accuracy percentage (0.0 to 100.0) (float) - <em>Note: This variable is only available in the ELO formula, not in the accuracy formula itself (to avoid circular dependency)</em></li>
                    <li><strong><code>has_won</code>:</strong> <code>1</code> if the player won the game, <code>0</code> otherwise (integer)</li>
                    <li><strong><code>has_drawn</code>:</strong> <code>1</code> if the game was a draw or had an undefined result, <code>0</code> otherwise (integer)</li>
                    <li><strong><code>opening_moves</code>:</strong> Total number of moves in the opening phase (integer)</li>
                    <li><strong><code>middlegame_moves</code>:</strong> Total number of moves in the middlegame phase (integer)</li>
                    <li><strong><code>endgame_moves</code>:</strong> Total number of moves in the endgame phase (integer)</li>
                    <li><strong><code>average_cpl_opening</code>:</strong> Average centipawn loss in the opening phase (float)</li>
                    <li><strong><code>average_cpl_middlegame</code>:</strong> Average centipawn loss in the middlegame phase (float)</li>
                    <li><strong><code>average_cpl_endgame</code>:</strong> Average centipawn loss in the endgame phase (float)</li>
                </ul>
                <p><strong>Variables for Phase-Specific Accuracy Formulas:</strong> Phase-specific accuracy formulas (opening, middlegame, endgame) have access to all the variables above, plus the following phase-specific and overall comparison variables:</p>
                <ul>
                    <li><strong><code>total_moves</code>:</strong> Number of moves in this specific phase (integer) - <em>Note: In phase formulas, this refers to the phase-specific move count, not the overall game</em></li>
                    <li><strong><code>blunders</code>:</strong> Number of blunders in this specific phase (integer)</li>
                    <li><strong><code>mistakes</code>:</strong> Number of mistakes in this specific phase (integer)</li>
                    <li><strong><code>inaccuracies</code>:</strong> Number of inaccuracies in this specific phase (integer)</li>
                    <li><strong><code>misses</code>:</strong> Number of misses in this specific phase (integer)</li>
                    <li><strong><code>best_moves</code>:</strong> Number of best moves in this specific phase (integer)</li>
                    <li><strong><code>good_moves</code>:</strong> Number of good moves in this specific phase (integer)</li>
                    <li><strong><code>brilliant_moves</code>:</strong> Number of brilliant moves in this specific phase (integer)</li>
                    <li><strong><code>blunder_rate</code>:</strong> Blunder rate for this specific phase (0.0 to 1.0) (float)</li>
                    <li><strong><code>mistake_rate</code>:</strong> Mistake rate for this specific phase (0.0 to 1.0) (float)</li>
                    <li><strong><code>average_cpl</code>:</strong> Average centipawn loss for this specific phase (float) - <em>Note: In phase formulas, this refers to the phase-specific CPL</em></li>
                    <li><strong><code>total_moves_overall</code>:</strong> Total number of moves in the entire game (integer)</li>
                    <li><strong><code>non_book_moves_overall</code>:</strong> Total number of analyzed moves in the entire game (integer)</li>
                    <li><strong><code>book_moves_overall</code>:</strong> Total number of book moves in the entire game (integer)</li>
                    <li><strong><code>blunders_overall</code>:</strong> Total number of blunders in the entire game (integer)</li>
                    <li><strong><code>mistakes_overall</code>:</strong> Total number of mistakes in the entire game (integer)</li>
                    <li><strong><code>inaccuracies_overall</code>:</strong> Total number of inaccuracies in the entire game (integer)</li>
                    <li><strong><code>misses_overall</code>:</strong> Total number of misses in the entire game (integer)</li>
                    <li><strong><code>best_moves_overall</code>:</strong> Total number of best moves in the entire game (integer)</li>
                    <li><strong><code>good_moves_overall</code>:</strong> Total number of good moves in the entire game (integer)</li>
                    <li><strong><code>brilliant_moves_overall</code>:</strong> Total number of brilliant moves in the entire game (integer)</li>
                    <li><strong><code>blunder_rate_overall</code>:</strong> Overall blunder rate for the entire game (0.0 to 1.0) (float)</li>
                    <li><strong><code>mistake_rate_overall</code>:</strong> Overall mistake rate for the entire game (0.0 to 1.0) (float)</li>
                    <li><strong><code>average_cpl</code> (overall context):</strong> Overall average centipawn loss for the entire game (float) - <em>Note: This is also available as a separate variable for comparison</em></li>
                </ul>
                <div class="tip-box">
                    <strong>Variable Context:</strong> In phase-specific formulas, variables without the <code>_overall</code> suffix refer to statistics for that specific phase, while variables with the <code>_overall</code> suffix refer to statistics for the entire game. This allows you to compare phase performance against overall game performance.
                </div>
                
                <h5>7.8.4 Available Functions</h5>
                <p>The following functions are available in all formulas:</p>
                <ul>
                    <li><strong><code>min(x, y)</code>:</strong> Returns the minimum of two values</li>
                    <li><strong><code>max(x, y)</code>:</strong> Returns the maximum of two values</li>
                    <li><strong><code>abs(x)</code>:</strong> Returns the absolute value of a number</li>
                    <li><strong><code>int(x)</code>:</strong> Converts a value to an integer</li>
                    <li><strong><code>not(x)</code>:</strong> Returns the logical negation of a value (1 if x is 0/false, 0 if x is non-zero/true)</li>
                </ul>
                <p>Standard mathematical operators are also supported: <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>**</code> (exponentiation), and parentheses for grouping.</p>
                <div class="tip-box">
                    <strong>Clamping Values:</strong> CARA does not automatically clamp formula results. You must use <code>min()</code> and <code>max()</code> functions in your formulas to ensure values stay within desired ranges. For example, to clamp accuracy between 5.0 and 100.0, use: <code>max(5.0, min(100.0, your_formula))</code>
                </div>
                
                <h5>7.8.5 ELO Estimation Formula</h5>
                <p>The ELO estimation formula calculates an estimated ELO rating based on player performance. You should use <code>max(0, ...)</code> in your formula to ensure negative ELO values are not returned.</p>
                
                <p><strong>Default Formula:</strong></p>
                <pre><code>"formula": "max(0, int(2800 - (average_cpl * 8.5) - ((blunder_rate * 50 + mistake_rate * 20) * 40)))"</code></pre>
                <p></p>
                <p><strong>Example Custom Formulas:</strong></p>
                
                <p>A simplified formula that only considers average centipawn loss:</p>
                <pre><code>"formula": "max(0, int(2800 - (average_cpl * 10)))"</code></pre>
                <p></p>
                
                <p>Add a bonus for wins and a penalty for losses (when the player has not won and has not drawn):</p>
                <pre><code>"formula": "max(0, int(2800 - (average_cpl * 8.5) - ((blunder_rate * 50 + mistake_rate * 20) * 40) + (has_won * 50) - ((1 - has_won) * (1 - has_drawn) * 30)))"</code></pre>
                <p></p>
                
                <p>Directly converts accuracy percentage to ELO (e.g., 90% accuracy ≈ 2520 ELO):</p>
                <pre><code>"formula": "max(0, int(accuracy * 28))"</code></pre>
                
                <h5>7.8.6 Accuracy Formula</h5>
                <p>The accuracy formula calculates a player's accuracy percentage. You should use <code>max(min_value, min(100.0, your_formula))</code> in your formula to ensure the result stays within the desired range (typically 0.0 to 100.0, though the default formula uses 5.0 as the minimum).</p>
                
                <p><strong>Default Formula:</strong></p>
                <pre><code>"formula": "max(5.0, min(100.0, 100.0 - (average_cpl / 3.5)))"</code></pre>
                <p></p>
                <p><strong>Example Custom Formulas:</strong></p>
                
                <p>A simplified formula with a different scaling factor:</p>
                <pre><code>"formula": "100.0 - (average_cpl / 2.0)"</code></pre>
                <p></p>
                
                <p>Ensures accuracy never drops below 10%:</p>
                <pre><code>"formula": "max(10.0, 100.0 - (average_cpl / 3.0))"</code></pre>
                <p></p>
                
                <p>Applies an additional penalty based on blunder rate:</p>
                <pre><code>"formula": "max(0.0, 100.0 - (average_cpl / 3.5) - (blunder_rate * 100))"</code></pre>
                
                <h5>7.8.7 Phase-Specific Accuracy Formulas</h5>
                <p>CARA supports separate accuracy formulas for each game phase (opening, middlegame, and endgame). These formulas are configured under <code>game_analysis → phase_accuracy_formulas</code> in <code>config.json</code>.</p>
                <p>Each phase has its own formula configuration with the same structure as the overall accuracy formula:</p>
                <ul>
                    <li><code>phase_accuracy_formulas → opening → formula</code> - Formula for opening phase accuracy</li>
                    <li><code>phase_accuracy_formulas → middlegame → formula</code> - Formula for middlegame phase accuracy</li>
                    <li><code>phase_accuracy_formulas → endgame → formula</code> - Formula for endgame phase accuracy</li>
                </ul>
                <p><strong>Default Phase Formulas:</strong></p>
                <pre><code>"opening": {
    "formula": "max(5.0, min(100.0, 100.0 - (average_cpl_opening / 3.5)))",
    "value_on_error": 0.0
},
"middlegame": {
    "formula": "max(5.0, min(100.0, 100.0 - (average_cpl_middlegame / 3.5)))",
    "value_on_error": 0.0
},
"endgame": {
    "formula": "max(5.0, min(100.0, 100.0 - (average_cpl_endgame / 3.5)))",
    "value_on_error": 0.0
}</code></pre>
                <p></p>
                <p><strong>Example: Comparing Phase Performance to Overall Game:</strong></p>
                <pre><code>"formula": "max(5.0, min(100.0, 100.0 - (average_cpl_opening / 3.5) - ((blunder_rate - blunder_rate_overall) * 30.0)))"</code></pre>
                <p>This formula penalizes the opening phase accuracy if the opening blunder rate is higher than the overall game blunder rate.</p>
                <p></p>
                
                <h5>7.8.8 Editing Formulas</h5>
                <p>To customize a formula:</p>
                
                <p><strong>Locate the formula configuration:</strong><br>
                Open <code>config.json</code> in a text editor and navigate to: <code>game_analysis → elo_estimation</code>, <code>game_analysis → accuracy_formula</code>, or <code>game_analysis → phase_accuracy_formulas</code> (for phase-specific formulas)</p>
                
                <p><strong>Modify the formula string:</strong><br>
                Edit the <code>"formula"</code> field with your desired expression. For example:</p>
                <pre><code>"elo_estimation": {
    "formula": "max(0, int(2800 - (average_cpl * 10)))",
    "value_on_error": 0
}</code></pre>
                <p></p>
                
                <p><strong>Set error handling (optional):</strong><br>
                Adjust <code>"value_on_error"</code> to specify what value should be returned if the formula evaluation fails. This is useful for debugging or providing fallback values.</p>
                
                <p><strong>Save and restart:</strong><br>
                Save the file and restart CARA for the changes to take effect. The new formulas will be used for all game summaries and player statistics calculations.</p>
                
                <div class="tip-box">
                    <strong>Testing Formulas:</strong> After modifying formulas, analyze a few games and check the Game Summary panel to verify the results match your expectations. If values seem incorrect, check the formula syntax and ensure all variable names are spelled correctly. Invalid formulas will fall back to the <code>value_on_error</code> value.
                </div>
                
                <h5>7.8.9 Player Statistics</h5>
                <p>When calculating player statistics across multiple games, CARA calculates ELO and accuracy for each individual game using the configured formulas, then averages these values. This approach ensures that each game contributes equally to the final statistics, regardless of game length or number of moves analyzed.</p>
                
                <p>For example, if a player has three games with ELO estimates of 1800, 1900, and 2000, the player's average ELO will be 1900, not a single calculation based on all moves combined.</p>
            </div>
        </section>

        <footer style="margin-top: 50px; padding-top: 20px; border-top: 2px solid rgb(60, 60, 65); color: rgb(180, 180, 180); text-align: center;">
            <p>CARA - Chess Analysis and Review Application v2.5.2</p>
            <p>Copyright (C) 2025 Philipp Guntermann</p>
            <p>This program is free software: you can redistribute it and/or modify it under the terms of the <a href="https://www.gnu.org/licenses/gpl-3.0.html" target="_blank" style="color: rgb(100, 150, 255);">GNU General Public License version 3</a> (GPL-3.0) or any later version.</p>
            <p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.</p>
            <p>For questions or inquiries, contact: <a href="mailto:pguntermann@me.com" style="color: rgb(100, 150, 255);">pguntermann@me.com</a></p>
        </footer>
    </div>
</body>
</html>

